"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function c(t){console.log(t)}!function(o){o.fn.animateCSS=function(e,n,i){return this.each(function(){var t=o(this);n&&"function"!=typeof n||(i=n,n=0);setTimeout(function(){t.addClass("animated "+e),"hidden"==t.css("visibility")&&t.css({visibility:"visible"}),t.is(":hidden")&&t.show(),t.bind("webkitAnimationEnd animationend oAnimationEnd",function(){"function"==typeof i&&i.call(this)})},n)})}}(jQuery),$(function(){$(window).scroll(function(){300<$(this).scrollTop()?($(".go-top").addClass("expand"),$(".page-header-alpha").addClass("scroll")):($(".go-top").removeClass("expand"),$(".page-header-alpha").removeClass("scroll"))}),$(".go-top").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},1e3)})});var $this=$(void 0);$("html").easeScroll(),$(document).ready(function(){var n=$(".owl-carousel");function e(t,n){t.each(function(){var t=$(this),e="animated "+t.data("animation-"+n);t.addClass(e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.removeClass(e)})})}n.owlCarousel({loop:!0,margin:0,autoplay:!0,center:!0,navSpeed:500,nav:!1,touchDrag:!1,mouseDrag:!1,items:1}),n.on("change.owl.carousel",function(t){e($(".owl-item",n).eq(t.item.index).find("[data-animation-out]"),"out")});var i=0;n.on("changed.owl.carousel",function(t){e($(".owl-item",n).eq(t.item.index).find("[data-animation-in]"),"in")}),n.on("translated.owl.carousel",function(t){if(console.log(t.item.index,t.page.count),t.item.index==t.page.count-1)if(i<1)i++,console.log(i);else{n.trigger("stop.owl.autoplay");var e=n.data("owl.carousel");e.settings.autoplay=!1,e.options.autoplay=!1,n.trigger("refresh.owl.carousel")}})});var icon=$(".navbar-toggler");function getSlide(){var t=$(window).width();return t<601&&500<t?2:t<500?void 0:3}icon.click(function(){$(".menu-i").toggleClass("open-nav"),$("#navbarMenu").toggleClass("menu-visible")});var swiper=new Swiper(".swiper-container",{effect:"coverflow",loop:!0,centeredSlides:!0,slidesPerView:getSlide(),initialSlide:3,keyboardControl:!0,mousewheelControl:!1,pagination:".screen-pagination",preventClicks:!1,preventClicksPropagation:!1,lazyLoadingInPrevNext:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",coverflow:{rotate:0,stretch:0,depth:250,modifier:1,slideShadows:!0}});$("select").each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var n=e.next("div.select-styled");n.text(e.children("option").eq(0).text());for(var i=$("<ul />",{class:"select-options"}).insertAfter(n),o=0;o<t;o++)$("<li />",{text:e.children("option").eq(o).text(),rel:e.children("option").eq(o).val()}).appendTo(i);var a=i.children("li");n.click(function(t){t.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),a.click(function(t){t.stopPropagation(),n.text($(this).text()).removeClass("active"),e.val($(this).attr("rel")),i.hide()}),$(document).click(function(){n.removeClass("active"),i.hide()})}),$(".navbar-nav-menu a").on("click",function(){var t=$(this).attr("data-scroll"),e=$('section[data-anchor="'+t+'"]').offset().top-28;return console.dir(e),$("body,html").animate({scrollTop:e},500),!1}),$(window).scroll(function(){var e=$(window).scrollTop();100<=e?$("main section").each(function(t){$(this).position().top<=e-20&&($(".navbar-nav-menu a.active").removeClass("active"),$(".navbar-nav-menu a").eq(t).addClass("active"))}):($(".navbar-nav-menu").removeClass("fixed"),$(".navbar-nav-menu a.active").removeClass("active"),$(".navbar-nav-menu a:first").addClass("active"))}).scroll(),function(l){var c=l.document.documentElement;function i(t,e){var n,i,o=l.pageYOffset,a=o+(n=c.clientHeight,i=l.innerHeight,n<i?i:n),s=t.offsetHeight,r=function(t){for(var e=0,n=0;isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(n+=t.offsetLeft),t=t.offsetParent;);return{top:e,left:n}}(t).top;return r+s*(e=e||0)<=a&&o<=r+s}function e(t){this.options=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.defaults,t),this._init()}e.prototype={defaults:{axis:"y",distance:"25px",duration:"0.66s",delay:"0s",viewportFactor:.33},_init:function(){var n=this;this.elems=Array.prototype.slice.call(c.querySelectorAll("[data-scrollReveal]")),this.scrolled=!1,this.elems.forEach(function(t,e){n.animate(t)});l.addEventListener("scroll",function(){n.scrolled||(n.scrolled=!0,setTimeout(function(){n._scrollPage()},60))},!1),l.addEventListener("resize",function(){n.resizeTimeout&&clearTimeout(n.resizeTimeout),n.resizeTimeout=setTimeout(function(){n._scrollPage(),n.resizeTimeout=null},200)},!1)},_scrollPage:function(){var n=this;this.elems.forEach(function(t,e){i(t,n.options.viewportFactor)&&n.animate(t)}),this.scrolled=!1},parseLanguage:function(t){var n,i,o,a=t.getAttribute("data-scrollreveal").split(/[, ]+/),s={};return i=[],o=["from","the","and","then","but"],a.forEach(function(t,e){-1<o.indexOf(t)||i.push(t)}),(a=i).forEach(function(t,e){switch(t){case"enter":return"top"!=(n=a[e+1])&&"bottom"!=n||(s.axis="y"),void("left"!=n&&"right"!=n||(s.axis="x"));case"after":case"wait":return void(s.delay=a[e+1]);case"move":return void(s.distance=a[e+1]);case"over":return void(s.duration=a[e+1]);case"trigger":return void(s.eventName=a[e+1]);default:return}}),"top"!=n&&"left"!=n||("undefined"==!_typeof(s.distance)?s.distance="-"+s.distance:s.distance="-"+this.options.distance),s},genCSS:function(t,e){var n=this.parseLanguage(t),i=n.distance||this.options.distance,o=n.duration||this.options.duration,a=n.delay||this.options.delay;return{transition:"-webkit-transition: all "+o+" ease "+a+";-moz-transition: all "+o+" ease "+a+";-o-transition: all "+o+" ease "+a+";transition: all "+o+" ease "+a+";",initial:"-webkit-transform: translate"+(e=n.axis||this.options.axis)+"("+i+");-moz-transform: translate"+e+"("+i+");transform: translate"+e+"("+i+");opacity: 0;",target:"-webkit-transform: translate"+e+"(0);-moz-transform: translate"+e+"(0);transform: translate"+e+"(0);opacity: 1;",totalDuration:1e3*(parseFloat(o)+parseFloat(a))}},animate:function(t){var e=this.genCSS(t);t.getAttribute("data-sr-init")||(t.setAttribute("style",e.initial),t.setAttribute("data-sr-init",!0)),t.getAttribute("data-sr-complete")||i(t,this.options.viewportFactor)&&(t.setAttribute("style",e.target+e.transition),setTimeout(function(){t.removeAttribute("style"),t.setAttribute("data-sr-complete",!0)},e.totalDuration))}},document.addEventListener("DOMContentLoaded",function(t){l.scrollReveal=new e})}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiYW5pbWF0ZS5qcyIsInNlbGVjdC5qcyIsInNtb3RoLmpzIiwieHJldmVsLmpzIl0sIm5hbWVzIjpbImMiLCJsIiwiY29uc29sZSIsImxvZyIsIiQiLCJmbiIsImFuaW1hdGVDU1MiLCJlZmZlY3QiLCJkZWxheSIsImNhbGxiYWNrIiwidGhpcyIsImVhY2giLCIkdGhpcyIsInNldFRpbWVvdXQiLCJhZGRDbGFzcyIsImNzcyIsInZpc2liaWxpdHkiLCJpcyIsInNob3ciLCJiaW5kIiwiY2FsbCIsImpRdWVyeSIsIndpbmRvdyIsInNjcm9sbCIsInNjcm9sbFRvcCIsInJlbW92ZUNsYXNzIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYW5pbWF0ZSIsImVhc2VTY3JvbGwiLCJkb2N1bWVudCIsInJlYWR5Iiwib3dsIiwic2V0QW5pbWF0aW9uIiwiX2VsZW0iLCJfSW5PdXQiLCIkZWxlbSIsIiRhbmltYXRpb25UeXBlIiwiZGF0YSIsIm9uZSIsIm93bENhcm91c2VsIiwibG9vcCIsIm1hcmdpbiIsImF1dG9wbGF5IiwiY2VudGVyIiwibmF2U3BlZWQiLCJuYXYiLCJ0b3VjaERyYWciLCJtb3VzZURyYWciLCJpdGVtcyIsIm9uIiwiZXEiLCJpdGVtIiwiaW5kZXgiLCJmaW5kIiwicm91bmQiLCJwYWdlIiwiY291bnQiLCJ0cmlnZ2VyIiwib3dsRGF0YSIsInNldHRpbmdzIiwib3B0aW9ucyIsImljb24iLCJnZXRTbGlkZSIsIndXIiwid2lkdGgiLCJ0b2dnbGVDbGFzcyIsInN3aXBlciIsIlN3aXBlciIsImNlbnRlcmVkU2xpZGVzIiwic2xpZGVzUGVyVmlldyIsImluaXRpYWxTbGlkZSIsImtleWJvYXJkQ29udHJvbCIsIm1vdXNld2hlZWxDb250cm9sIiwicGFnaW5hdGlvbiIsInByZXZlbnRDbGlja3MiLCJwcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb24iLCJsYXp5TG9hZGluZ0luUHJldk5leHQiLCJuZXh0QnV0dG9uIiwicHJldkJ1dHRvbiIsImNvdmVyZmxvdyIsInJvdGF0ZSIsInN0cmV0Y2giLCJkZXB0aCIsIm1vZGlmaWVyIiwic2xpZGVTaGFkb3dzIiwibnVtYmVyT2ZPcHRpb25zIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJ3cmFwIiwiYWZ0ZXIiLCIkc3R5bGVkU2VsZWN0IiwibmV4dCIsInRleHQiLCIkbGlzdCIsImNsYXNzIiwiaW5zZXJ0QWZ0ZXIiLCJpIiwicmVsIiwidmFsIiwiYXBwZW5kVG8iLCIkbGlzdEl0ZW1zIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsIm5vdCIsImhpZGUiLCJ0b2dnbGUiLCJhdHRyIiwic2Nyb2xsQW5jaG9yIiwic2Nyb2xsUG9pbnQiLCJvZmZzZXQiLCJ0b3AiLCJkaXIiLCJ3aW5kc2Nyb2xsIiwicG9zaXRpb24iLCJkb2NFbGVtIiwiZG9jdW1lbnRFbGVtZW50IiwiaXNFbGVtZW50SW5WaWV3cG9ydCIsImVsIiwiaCIsImNsaWVudCIsImlubmVyIiwic2Nyb2xsZWQiLCJwYWdlWU9mZnNldCIsInZpZXdlZCIsImVsSCIsIm9mZnNldEhlaWdodCIsImVsVG9wIiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsImlzTmFOIiwib2Zmc2V0UGFyZW50IiwibGVmdCIsImdldE9mZnNldCIsInNjcm9sbFJldmVhbCIsImEiLCJiIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJleHRlbmQiLCJkZWZhdWx0cyIsIl9pbml0IiwicHJvdG90eXBlIiwiYXhpcyIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJ2aWV3cG9ydEZhY3RvciIsInNlbGYiLCJlbGVtcyIsIkFycmF5Iiwic2xpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfc2Nyb2xsUGFnZSIsInJlc2l6ZVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJwYXJzZUxhbmd1YWdlIiwiZW50ZXJGcm9tIiwicmV0IiwiYmxhY2tsaXN0Iiwid29yZHMiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpdCIsInBhcnNlZCIsIndvcmQiLCJpbmRleE9mIiwicHVzaCIsImV2ZW50TmFtZSIsIl90eXBlb2YiLCJnZW5DU1MiLCJkaXN0IiwiZHVyIiwidHJhbnNpdGlvbiIsImluaXRpYWwiLCJ0YXJnZXQiLCJ0b3RhbER1cmF0aW9uIiwicGFyc2VGbG9hdCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImV2dCJdLCJtYXBwaW5ncyI6Im1PQTBCQSxTQUFBQSxFQUFBQyxHQUNBQyxRQUFBQyxJQUFBRixJQzNCQSxTQUFBRyxHQUVBQSxFQUFBQyxHQUFBQyxXQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBR0EsT0FBQUMsS0FBQUMsS0FBQSxXQUdBLElBQUFDLEVBQUFSLEVBQUFNLE1BR0FGLEdBQUEsbUJBQUFBLElBR0FDLEVBQUFELEVBR0FBLEVBQUEsR0FJQUssV0FBQSxXQUdBRCxFQUFBRSxTQUFBLFlBQUFQLEdBR0EsVUFBQUssRUFBQUcsSUFBQSxlQUdBSCxFQUFBRyxLQUNBQyxXQUFBLFlBTUFKLEVBQUFLLEdBQUEsWUFHQUwsRUFBQU0sT0FLQU4sRUFBQU8sS0FBQSxnREFBQSxXQUdBLG1CQUFBVixHQUdBQSxFQUFBVyxLQUFBVixTQU9BRixNQTFEQSxDQWdFQWEsUUQ5REFqQixFQUFBLFdBRUFBLEVBQUFrQixRQUFBQyxPQUFBLFdBQ0EsSUFBQW5CLEVBQUFNLE1BQUFjLGFBQ0FwQixFQUFBLFdBQUFVLFNBQUEsVUFDQVYsRUFBQSxzQkFBQVUsU0FBQSxZQUVBVixFQUFBLFdBQUFxQixZQUFBLFVBQ0FyQixFQUFBLHNCQUFBcUIsWUFBQSxhQUtBckIsRUFBQSxXQUFBc0IsTUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFFQXhCLEVBQUEsY0FBQXlCLFNBQ0FMLFVBQUEsR0FDQSxTQVNBLElBQUFaLE1BQUFSLE9BQUFBLEdBQ0FBLEVBQUEsUUFBQTBCLGFBRUExQixFQUFBMkIsVUFBQUMsTUFBQSxXQUVBLElBQUFDLEVBQUE3QixFQUFBLGlCQWlCQSxTQUFBOEIsRUFBQUMsRUFBQUMsR0FLQUQsRUFBQXhCLEtBQUEsV0FDQSxJQUFBMEIsRUFBQWpDLEVBQUFNLE1BRUE0QixFQUFBLFlBQUFELEVBQUFFLEtBQUEsYUFBQUgsR0FDQUMsRUFBQXZCLFNBQUF3QixHQUFBRSxJQU5BLCtFQU1BLFdBRUFILEVBQUFaLFlBQUFhLE9BekJBTCxFQUFBUSxhQUNBQyxNQUFBLEVBQ0FDLE9BQUEsRUFDQUMsVUFBQSxFQUNBQyxRQUFBLEVBQ0FDLFNBQUEsSUFDQUMsS0FBQSxFQUNBQyxXQUFBLEVBQ0FDLFdBQUEsRUFDQUMsTUFBQSxJQXNCQWpCLEVBQUFrQixHQUFBLHNCQUFBLFNBQUF4QixHQUdBTyxFQUZBOUIsRUFBQSxZQUFBNkIsR0FBQW1CLEdBQUF6QixFQUFBMEIsS0FBQUMsT0FDQUMsS0FBQSx3QkFDQSxTQUtBLElBQUFDLEVBQUEsRUFDQXZCLEVBQUFrQixHQUFBLHVCQUFBLFNBQUF4QixHQUtBTyxFQUhBOUIsRUFBQSxZQUFBNkIsR0FBQW1CLEdBQUF6QixFQUFBMEIsS0FBQUMsT0FDQUMsS0FBQSx1QkFFQSxRQUdBdEIsRUFBQWtCLEdBQUEsMEJBQUEsU0FBQXhCLEdBR0EsR0FGQXpCLFFBQUFDLElBQUF3QixFQUFBMEIsS0FBQUMsTUFBQTNCLEVBQUE4QixLQUFBQyxPQUVBL0IsRUFBQTBCLEtBQUFDLE9BQUEzQixFQUFBOEIsS0FBQUMsTUFBQSxFQUNBLEdBQUFGLEVBQUEsRUFDQUEsSUFDQXRELFFBQUFDLElBQUFxRCxPQUNBLENBQ0F2QixFQUFBMEIsUUFBQSxxQkFDQSxJQUFBQyxFQUFBM0IsRUFBQU0sS0FBQSxnQkFDQXFCLEVBQUFDLFNBQUFqQixVQUFBLEVBQ0FnQixFQUFBRSxRQUFBbEIsVUFBQSxFQUNBWCxFQUFBMEIsUUFBQSw2QkFTQSxJQUFBSSxLQUFBM0QsRUFBQSxtQkFZQSxTQUFBNEQsV0FDQSxJQUFBQyxFQUFBN0QsRUFBQWtCLFFBQUE0QyxRQUNBLE9BQUFELEVBQUEsS0FBQSxJQUFBQSxFQUNBLEVBQ0FBLEVBQUEsU0FBQSxFQUlBLEVBbEJBRixLQUFBckMsTUFBQSxXQUNBdEIsRUFBQSxXQUFBK0QsWUFBQSxZQUNBL0QsRUFBQSxlQUFBK0QsWUFBQSxrQkFvQkEsSUFBQUMsT0FBQSxJQUFBQyxPQUFBLHFCQUNBOUQsT0FBQSxZQUNBbUMsTUFBQSxFQUNBNEIsZ0JBQUEsRUFDQUMsY0FBQVAsV0FDQVEsYUFBQSxFQUNBQyxpQkFBQSxFQUNBQyxtQkFBQSxFQUNBQyxXQUFBLHFCQUNBQyxlQUFBLEVBQ0FDLDBCQUFBLEVBQ0FDLHVCQUFBLEVBQ0FDLFdBQUEsc0JBQ0FDLFdBQUEsc0JBQ0FDLFdBQ0FDLE9BQUEsRUFDQUMsUUFBQSxFQUNBQyxNQUFBLElBQ0FDLFNBQUEsRUFDQUMsY0FBQSxLRXJKQWxGLEVBQUEsVUFBQU8sS0FBQSxXQUNBLElBQUFDLEVBQUFSLEVBQUFNLE1BQUE2RSxFQUFBbkYsRUFBQU0sTUFBQThFLFNBQUEsVUFBQUMsT0FFQTdFLEVBQUFFLFNBQUEsaUJBQ0FGLEVBQUE4RSxLQUFBLDhCQUNBOUUsRUFBQStFLE1BQUEscUNBRUEsSUFBQUMsRUFBQWhGLEVBQUFpRixLQUFBLHFCQUNBRCxFQUFBRSxLQUFBbEYsRUFBQTRFLFNBQUEsVUFBQXBDLEdBQUEsR0FBQTBDLFFBTUEsSUFKQSxJQUFBQyxFQUFBM0YsRUFBQSxVQUNBNEYsTUFBQSxtQkFDQUMsWUFBQUwsR0FFQU0sRUFBQSxFQUFBQSxFQUFBWCxFQUFBVyxJQUNBOUYsRUFBQSxVQUNBMEYsS0FBQWxGLEVBQUE0RSxTQUFBLFVBQUFwQyxHQUFBOEMsR0FBQUosT0FDQUssSUFBQXZGLEVBQUE0RSxTQUFBLFVBQUFwQyxHQUFBOEMsR0FBQUUsUUFDQUMsU0FBQU4sR0FHQSxJQUFBTyxFQUFBUCxFQUFBUCxTQUFBLE1BRUFJLEVBQUFsRSxNQUFBLFNBQUE2RSxHQUNBQSxFQUFBQyxrQkFDQXBHLEVBQUEsNEJBQUFxRyxJQUFBL0YsTUFBQUMsS0FBQSxXQUNBUCxFQUFBTSxNQUFBZSxZQUFBLFVBQUFvRSxLQUFBLHFCQUFBYSxTQUVBdEcsRUFBQU0sTUFBQXlELFlBQUEsVUFBQTBCLEtBQUEscUJBQUFjLFdBR0FMLEVBQUE1RSxNQUFBLFNBQUE2RSxHQUNBQSxFQUFBQyxrQkFDQVosRUFBQUUsS0FBQTFGLEVBQUFNLE1BQUFvRixRQUFBckUsWUFBQSxVQUNBYixFQUFBd0YsSUFBQWhHLEVBQUFNLE1BQUFrRyxLQUFBLFFBQ0FiLEVBQUFXLFNBSUF0RyxFQUFBMkIsVUFBQUwsTUFBQSxXQUNBa0UsRUFBQW5FLFlBQUEsVUFDQXNFLEVBQUFXLFdDekNBdEcsRUFBQSxzQkFBQStDLEdBQUEsUUFBQSxXQUVBLElBQUEwRCxFQUFBekcsRUFBQU0sTUFBQWtHLEtBQUEsZUFDQUUsRUFBQTFHLEVBQUEsd0JBQUF5RyxFQUFBLE1BQUFFLFNBQUFDLElBQUEsR0FPQSxPQU5BOUcsUUFBQStHLElBQUFILEdBRUExRyxFQUFBLGFBQUF5QixTQUNBTCxVQUFBc0YsR0FDQSxNQUVBLElBS0ExRyxFQUFBa0IsUUFBQUMsT0FBQSxXQUNBLElBQUEyRixFQUFBOUcsRUFBQWtCLFFBQUFFLFlBQ0EsS0FBQTBGLEVBRUE5RyxFQUFBLGdCQUFBTyxLQUFBLFNBQUF1RixHQUNBOUYsRUFBQU0sTUFBQXlHLFdBQUFILEtBQUFFLEVBQUEsS0FDQTlHLEVBQUEsNkJBQUFxQixZQUFBLFVBQ0FyQixFQUFBLHNCQUFBZ0QsR0FBQThDLEdBQUFwRixTQUFBLGNBTUFWLEVBQUEsb0JBQUFxQixZQUFBLFNBQ0FyQixFQUFBLDZCQUFBcUIsWUFBQSxVQUNBckIsRUFBQSw0QkFBQVUsU0FBQSxhQUdBUyxTQ1ZBLFNBQUFELEdBSUEsSUFBQThGLEVBQUE5RixFQUFBUyxTQUFBc0YsZ0JBNEJBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsSUExQkFDLEVBQ0FDLEVBeUJBQyxFQUFBckcsRUFBQXNHLFlBQ0FDLEVBQUFGLEdBM0JBRixFQUFBTCxFQUFBLGFBQ0FNLEVBQUFwRyxFQUFBLFlBRUFtRyxFQUFBQyxFQUFBQSxFQUFBRCxHQXlCQUssRUFBQVAsRUFBQVEsYUFDQUMsRUF2QkEsU0FBQVQsR0FJQSxJQUhBLElBQUFVLEVBQUEsRUFDQUMsRUFBQSxFQUdBQyxNQUFBWixFQUFBVSxhQUNBQSxHQUFBVixFQUFBVSxXQUVBRSxNQUFBWixFQUFBVyxjQUNBQSxHQUFBWCxFQUFBVyxZQUVBWCxFQUFBQSxFQUFBYSxlQUVBLE9BQ0FwQixJQUFBaUIsRUFDQUksS0FBQUgsR0FRQUksQ0FBQWYsR0FBQVAsSUFJQSxPQUFBZ0IsRUFBQUYsR0FGQU4sRUFBQUEsR0FBQSxJQUVBSyxHQUFBRixHQUhBSyxFQUFBRixFQWdCQSxTQUFBUyxFQUFBekUsR0FDQXBELEtBQUFvRCxRQVhBLFNBQUEwRSxFQUFBQyxHQUNBLElBQUEsSUFBQUMsS0FBQUQsRUFDQUEsRUFBQUUsZUFBQUQsS0FDQUYsRUFBQUUsR0FBQUQsRUFBQUMsSUFHQSxPQUFBRixFQUtBSSxDQUFBbEksS0FBQW1JLFNBQUEvRSxHQUNBcEQsS0FBQW9JLFFBS0FQLEVBQUFRLFdBQ0FGLFVBQ0FHLEtBQUEsSUFDQUMsU0FBQSxPQUNBQyxTQUFBLFFBQ0ExSSxNQUFBLEtBSUEySSxlQUFBLEtBS0FMLE1BQUEsV0FFQSxJQUFBTSxFQUFBMUksS0FFQUEsS0FBQTJJLE1BQUFDLE1BQUFQLFVBQUFRLE1BQUFuSSxLQUFBZ0csRUFBQW9DLGlCQUFBLHdCQUNBOUksS0FBQWlILFVBQUEsRUFJQWpILEtBQUEySSxNQUFBSSxRQUFBLFNBQUFsQyxFQUFBckIsR0FDQWtELEVBQUF2SCxRQUFBMEYsS0F1QkFqRyxFQUFBb0ksaUJBQUEsU0FwQkEsV0FDQU4sRUFBQXpCLFdBQ0F5QixFQUFBekIsVUFBQSxFQUNBOUcsV0FBQSxXQUNBdUksRUFBQU8sZUFDQSxPQWVBLEdBQ0FySSxFQUFBb0ksaUJBQUEsU0FaQSxXQUtBTixFQUFBUSxlQUNBQyxhQUFBVCxFQUFBUSxlQUVBUixFQUFBUSxjQUFBL0ksV0FQQSxXQUNBdUksRUFBQU8sY0FDQVAsRUFBQVEsY0FBQSxNQUtBLE9BSUEsSUFLQUQsWUFBQSxXQUNBLElBQUFQLEVBQUExSSxLQUVBQSxLQUFBMkksTUFBQUksUUFBQSxTQUFBbEMsRUFBQXJCLEdBQ0FvQixFQUFBQyxFQUFBNkIsRUFBQXRGLFFBQUFxRixpQkFDQUMsRUFBQXZILFFBQUEwRixLQUdBN0csS0FBQWlILFVBQUEsR0FLQW1DLGNBQUEsU0FBQXZDLEdBR0EsSUFDQXdDLEVBSUFDLEVBRUFDLEVBUEFDLEVBQUEzQyxFQUFBNEMsYUFBQSxxQkFBQUMsTUFBQSxTQUVBQyxLQW9GQSxPQWpGQUwsS0FFQUMsR0FDQSxPQUNBLE1BQ0EsTUFDQSxPQUNBLE9BYUFDLEVBVkFULFFBQUEsU0FBQWEsRUFBQXBFLElBQ0EsRUFBQStELEVBQUFNLFFBQUFELElBR0FOLEVBQUFRLEtBQUFGLE1BTUFKLEVBSEFGLEdBS0FQLFFBQUEsU0FBQWEsRUFBQXBFLEdBRUEsT0FBQW9FLEdBQ0EsSUFBQSxRQVdBLE1BUkEsUUFGQVAsRUFBQUcsRUFBQWhFLEVBQUEsS0FFQSxVQUFBNkQsSUFDQU0sRUFBQXJCLEtBQUEsVUFHQSxRQUFBZSxHQUFBLFNBQUFBLElBQ0FNLEVBQUFyQixLQUFBLE1BS0EsSUFBQSxRQUlBLElBQUEsT0FFQSxZQURBcUIsRUFBQTdKLE1BQUEwSixFQUFBaEUsRUFBQSxJQUdBLElBQUEsT0FFQSxZQURBbUUsRUFBQXBCLFNBQUFpQixFQUFBaEUsRUFBQSxJQUdBLElBQUEsT0FFQSxZQURBbUUsRUFBQW5CLFNBQUFnQixFQUFBaEUsRUFBQSxJQUdBLElBQUEsVUFFQSxZQURBbUUsRUFBQUksVUFBQVAsRUFBQWhFLEVBQUEsSUFHQSxRQUVBLFVBU0EsT0FBQTZELEdBQUEsUUFBQUEsSUFFQSxjQUFBVyxRQUFBTCxFQUFBcEIsVUFDQW9CLEVBQUFwQixTQUFBLElBQUFvQixFQUFBcEIsU0FJQW9CLEVBQUFwQixTQUFBLElBQUF2SSxLQUFBb0QsUUFBQW1GLFVBS0FvQixHQUtBTSxPQUFBLFNBQUFwRCxFQUFBeUIsR0FDQSxJQUFBcUIsRUFBQTNKLEtBQUFvSixjQUFBdkMsR0FFQXFELEVBQUFQLEVBQUFwQixVQUFBdkksS0FBQW9ELFFBQUFtRixTQUNBNEIsRUFBQVIsRUFBQW5CLFVBQUF4SSxLQUFBb0QsUUFBQW9GLFNBQ0ExSSxFQUFBNkosRUFBQTdKLE9BQUFFLEtBQUFvRCxRQUFBdEQsTUFpQkEsT0FDQXNLLFdBZkEsMkJBQUFELEVBQUEsU0FBQXJLLEVBQUEseUJBQ0FxSyxFQUFBLFNBQUFySyxFQUFBLHVCQUNBcUssRUFBQSxTQUFBckssRUFBQSxvQkFDQXFLLEVBQUEsU0FBQXJLLEVBQUEsSUFhQXVLLFFBWEEsZ0NBUEEvQixFQUFBcUIsRUFBQXJCLE1BQUF0SSxLQUFBb0QsUUFBQWtGLE1BT0EsSUFBQTRCLEVBQUEsOEJBQ0E1QixFQUFBLElBQUE0QixFQUFBLHlCQUNBNUIsRUFBQSxJQUFBNEIsRUFBQSxnQkFVQUksT0FQQSwrQkFBQWhDLEVBQUEsZ0NBQ0FBLEVBQUEsMkJBQ0FBLEVBQUEsa0JBTUFpQyxjQUFBLEtBQUFDLFdBQUFMLEdBQUFLLFdBQUExSyxNQU1BcUIsUUFBQSxTQUFBMEYsR0FDQSxJQUFBeEcsRUFBQUwsS0FBQWlLLE9BQUFwRCxHQUVBQSxFQUFBNEMsYUFBQSxrQkFDQTVDLEVBQUE0RCxhQUFBLFFBQUFwSyxFQUFBZ0ssU0FDQXhELEVBQUE0RCxhQUFBLGdCQUFBLElBR0E1RCxFQUFBNEMsYUFBQSxxQkFJQTdDLEVBQUFDLEVBQUE3RyxLQUFBb0QsUUFBQXFGLGtCQUNBNUIsRUFBQTRELGFBQUEsUUFBQXBLLEVBQUFpSyxPQUFBakssRUFBQStKLFlBRUFqSyxXQUFBLFdBQ0EwRyxFQUFBNkQsZ0JBQUEsU0FDQTdELEVBQUE0RCxhQUFBLG9CQUFBLElBQ0FwSyxFQUFBa0ssa0JBTUFsSixTQUFBMkgsaUJBQUEsbUJBQUEsU0FBQTJCLEdBQ0EvSixFQUFBaUgsYUFBQSxJQUFBQSxJQXJSQSxDQXdSQWpIIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuLy8gR28gVE9QXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gU2hvdyBvciBoaWRlIHRoZSBzdGlja3kgZm9vdGVyIGJ1dHRvblxyXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gMzAwKSB7XHJcbiAgICAgICAgJCgnLmdvLXRvcCcpLmFkZENsYXNzKCdleHBhbmQnKTtcclxuICAgICAgICAkKCcucGFnZS1oZWFkZXItYWxwaGEnKS5hZGRDbGFzcygnc2Nyb2xsJylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcuZ28tdG9wJykucmVtb3ZlQ2xhc3MoJ2V4cGFuZCcpO1xyXG4gICAgICAgICAkKCcucGFnZS1oZWFkZXItYWxwaGEnKS5yZW1vdmVDbGFzcygnc2Nyb2xsJylcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQW5pbWF0ZSB0aGUgc2Nyb2xsIHRvIHRvcFxyXG4gICAgJCgnLmdvLXRvcCcpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgIHNjcm9sbFRvcDogMFxyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcblxyXG5cclxuICB9KTtcclxuXHJcbiAgIGZ1bmN0aW9uIGMgKGwpe1xyXG4gICBcdGNvbnNvbGUubG9nKGwpO1xyXG4gICB9XHJcbiAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICQoXCJodG1sXCIpLmVhc2VTY3JvbGwoKTtcclxuLy9PV0wgQ0FST1VTRUxcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCl7XHJcbiAgLy8gRGVjbGFyZSBDYXJvdXNlbCBqcXVlcnkgb2JqZWN0XHJcbiAgdmFyIG93bCA9ICQoJy5vd2wtY2Fyb3VzZWwnKTtcclxuXHJcbiAgLy8gQ2Fyb3VzZWwgaW5pdGlhbGl6YXRpb25cclxuICBvd2wub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICBsb29wOnRydWUsXHJcbiAgICAgIG1hcmdpbjowLFxyXG4gICAgICBhdXRvcGxheTp0cnVlLFxyXG4gICAgICBjZW50ZXI6IHRydWUsXHJcbiAgICAgIG5hdlNwZWVkOjUwMCxcclxuICAgICAgbmF2OmZhbHNlLFxyXG4gICAgICB0b3VjaERyYWcgIDogZmFsc2UsXHJcbiAgICAgIG1vdXNlRHJhZyAgOiBmYWxzZSxcclxuICAgICAgaXRlbXM6MVxyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy8gYWRkIGFuaW1hdGUuY3NzIGNsYXNzKGVzKSB0byB0aGUgZWxlbWVudHMgdG8gYmUgYW5pbWF0ZWRcclxuICBmdW5jdGlvbiBzZXRBbmltYXRpb24gKCBfZWxlbSwgX0luT3V0ICkge1xyXG4gICAgLy8gU3RvcmUgYWxsIGFuaW1hdGlvbmVuZCBldmVudCBuYW1lIGluIGEgc3RyaW5nLlxyXG4gICAgLy8gY2YgYW5pbWF0ZS5jc3MgZG9jdW1lbnRhdGlvblxyXG4gICAgdmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnO1xyXG5cclxuICAgIF9lbGVtLmVhY2ggKCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICB2YXIgJGVsZW0gPSAkKHRoaXMpO1xyXG5cclxuICAgICAgdmFyICRhbmltYXRpb25UeXBlID0gJ2FuaW1hdGVkICcgKyAkZWxlbS5kYXRhKCAnYW5pbWF0aW9uLScgKyBfSW5PdXQgKTtcclxuICAgICAgJGVsZW0uYWRkQ2xhc3MoJGFuaW1hdGlvblR5cGUpLm9uZShhbmltYXRpb25FbmRFdmVudCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgXHJcbiAgICAgICAgJGVsZW0ucmVtb3ZlQ2xhc3MoJGFuaW1hdGlvblR5cGUpOyAvLyByZW1vdmUgYW5pbWF0ZS5jc3MgQ2xhc3MgYXQgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uc1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbi8vIEZpcmVkIGJlZm9yZSBjdXJyZW50IHNsaWRlIGNoYW5nZVxyXG4gIG93bC5vbignY2hhbmdlLm93bC5jYXJvdXNlbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkY3VycmVudEl0ZW0gPSAkKCcub3dsLWl0ZW0nLCBvd2wpLmVxKGV2ZW50Lml0ZW0uaW5kZXgpO1xyXG4gICAgICB2YXIgJGVsZW1zVG9hbmltID0gJGN1cnJlbnRJdGVtLmZpbmQoXCJbZGF0YS1hbmltYXRpb24tb3V0XVwiKTtcclxuICAgICAgc2V0QW5pbWF0aW9uICgkZWxlbXNUb2FuaW0sICdvdXQnKTtcclxuXHJcbiAgfSk7XHJcblxyXG4vLyBGaXJlZCBhZnRlciBjdXJyZW50IHNsaWRlIGhhcyBiZWVuIGNoYW5nZWRcclxuICB2YXIgcm91bmQgPSAwO1xyXG4gIG93bC5vbignY2hhbmdlZC5vd2wuY2Fyb3VzZWwnLCBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgICAgdmFyICRjdXJyZW50SXRlbSA9ICQoJy5vd2wtaXRlbScsIG93bCkuZXEoZXZlbnQuaXRlbS5pbmRleCk7XHJcbiAgICAgIHZhciAkZWxlbXNUb2FuaW0gPSAkY3VycmVudEl0ZW0uZmluZChcIltkYXRhLWFuaW1hdGlvbi1pbl1cIik7XHJcbiAgICBcclxuICAgICAgc2V0QW5pbWF0aW9uICgkZWxlbXNUb2FuaW0sICdpbicpO1xyXG4gIH0pXHJcbiAgXHJcbiAgb3dsLm9uKCd0cmFuc2xhdGVkLm93bC5jYXJvdXNlbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBjb25zb2xlLmxvZyAoZXZlbnQuaXRlbS5pbmRleCwgZXZlbnQucGFnZS5jb3VudCk7XHJcbiAgICBcclxuICAgICAgaWYgKGV2ZW50Lml0ZW0uaW5kZXggPT0gKGV2ZW50LnBhZ2UuY291bnQgLSAxKSkgIHtcclxuICAgICAgICBpZiAocm91bmQgPCAxKSB7XHJcbiAgICAgICAgICByb3VuZCsrXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyAocm91bmQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvd2wudHJpZ2dlcignc3RvcC5vd2wuYXV0b3BsYXknKTtcclxuICAgICAgICAgIHZhciBvd2xEYXRhID0gb3dsLmRhdGEoJ293bC5jYXJvdXNlbCcpO1xyXG4gICAgICAgICAgb3dsRGF0YS5zZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOyAvL2Rvbid0IGtub3cgaWYgYm90aCBhcmUgbmVjZXNzYXJ5XHJcbiAgICAgICAgICBvd2xEYXRhLm9wdGlvbnMuYXV0b3BsYXkgPSBmYWxzZTtcclxuICAgICAgICAgIG93bC50cmlnZ2VyKCdyZWZyZXNoLm93bC5jYXJvdXNlbCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gIH0pO1xyXG5cclxufSk7XHJcblxyXG5cclxuLy9OYXZiYXJcclxudmFyIGljb24gPSAkKCcubmF2YmFyLXRvZ2dsZXInKTtcclxuXHJcbmljb24uY2xpY2soZnVuY3Rpb24oKXtcclxuICAkKCcubWVudS1pJykudG9nZ2xlQ2xhc3MoJ29wZW4tbmF2Jyk7XHJcbiAgJCgnI25hdmJhck1lbnUnKS50b2dnbGVDbGFzcygnbWVudS12aXNpYmxlJyk7XHJcblxyXG59KVxyXG5cclxuIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICAgRm90b3MgY2Fyb3VzZWxcclxuICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLyAgXHJcblxyXG4gICAgIGZ1bmN0aW9uIGdldFNsaWRlKCkge1xyXG4gICAgICAgIHZhciB3VyA9ICQod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgIGlmICh3VyA8IDYwMSAmJiB3VyA+IDUwMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9ZWxzZSBpZiAod1cgPCA1MDApe1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIDM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9XHJcbnZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuc3dpcGVyLWNvbnRhaW5lcicsIHtcclxuICBlZmZlY3Q6ICdjb3ZlcmZsb3cnLFxyXG4gIGxvb3A6IHRydWUsXHJcbiAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgc2xpZGVzUGVyVmlldzogZ2V0U2xpZGUoKSxcclxuICBpbml0aWFsU2xpZGU6IDMsXHJcbiAga2V5Ym9hcmRDb250cm9sOiB0cnVlLFxyXG4gIG1vdXNld2hlZWxDb250cm9sOiBmYWxzZSxcclxuIHBhZ2luYXRpb246ICcuc2NyZWVuLXBhZ2luYXRpb24nLFxyXG4gIHByZXZlbnRDbGlja3M6IGZhbHNlLFxyXG4gIHByZXZlbnRDbGlja3NQcm9wYWdhdGlvbjogZmFsc2UsXHJcbiAgbGF6eUxvYWRpbmdJblByZXZOZXh0OiB0cnVlLFxyXG4gIG5leHRCdXR0b246ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgcHJldkJ1dHRvbjogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxyXG4gIGNvdmVyZmxvdzoge1xyXG4gICAgcm90YXRlOiAwLFxyXG4gICAgc3RyZXRjaDogMCxcclxuICAgIGRlcHRoOiAyNTAsXHJcbiAgICBtb2RpZmllcjogMSxcclxuICAgIHNsaWRlU2hhZG93cyA6IHRydWUsXHJcbiAgfVxyXG59KTtcclxuICAgICAgICAgIFxyXG4gLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgICBGb3RvcyBjYXJvdXNlbFxyXG4gICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovICAiLCIoZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgICAkLmZuLmFuaW1hdGVDU1MgPSBmdW5jdGlvbiAoZWZmZWN0LCBkZWxheSwgY2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHRoaXMgdG8gbWFpbnRhaW4gY2hhaW5hYmlsaXR5XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBDYWNoZSAkKHRoaXMpIGZvciBzcGVlZFxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZGVsYXkgZXhpc3RzIG9yIGlmIGl0J3MgYSBjYWxsYmFja1xyXG4gICAgICAgICAgICBpZiAoIWRlbGF5IHx8IHR5cGVvZiBkZWxheSA9PSAnZnVuY3Rpb24nKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGNhbGxiYWNrLCBtb3ZlIGl0IHRvIGNhbGxiYWNrIHNvIHdlIGNhbiBjYWxsIGl0IGxhdGVyXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGRlbGF5O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgZGVsYXkgdG8gMCBmb3IgdGhlIHNldFRpbWVvdXRcclxuICAgICAgICAgICAgICAgIGRlbGF5ID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU3RhcnQgYSBjb3VudGVyIHNvIHdlIGNhbiBkZWxheSB0aGUgYW5pbWF0aW9uIGlmIHJlcXVpcmVkXHJcbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGFuaW1hdGlvbiBlZmZlY3Qgd2l0aCBjbGFzc2VzXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnYW5pbWF0ZWQgJyArIGVmZmVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVsZW1lbnIgaGFzIGJlZW4gaGlkZGVuIHRvIHN0YXJ0IHdpdGhcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5jc3MoJ3Zpc2liaWxpdHknKSA9PSAnaGlkZGVuJykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCBoYXMsIHNob3cgaXQgKGFmdGVyIHRoZSBjbGFzcyBoYXMgYmVlbiBhZGRlZClcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBpcyBoaWRkZW5cclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5pcygnOmhpZGRlbicpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgaXRcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEV2ZW50IHRyaWdnZXJlZCB3aGVuIHRoZSBhbmltYXRpb24gaGFzIGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5iaW5kKCd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kIG9BbmltYXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhIGNhbGxiYWNrIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTcGVjaWZ5IHRoZSBkZWxheVxyXG4gICAgICAgICAgICB9LCBkZWxheSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG59KShqUXVlcnkpOyIsIiQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgIHZhciAkdGhpcyA9ICQodGhpcyksIG51bWJlck9mT3B0aW9ucyA9ICQodGhpcykuY2hpbGRyZW4oJ29wdGlvbicpLmxlbmd0aDtcclxuICBcclxuICAgICR0aGlzLmFkZENsYXNzKCdzZWxlY3QtaGlkZGVuJyk7IFxyXG4gICAgJHRoaXMud3JhcCgnPGRpdiBjbGFzcz1cInNlbGVjdFwiPjwvZGl2PicpO1xyXG4gICAgJHRoaXMuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJzZWxlY3Qtc3R5bGVkXCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgdmFyICRzdHlsZWRTZWxlY3QgPSAkdGhpcy5uZXh0KCdkaXYuc2VsZWN0LXN0eWxlZCcpO1xyXG4gICAgJHN0eWxlZFNlbGVjdC50ZXh0KCR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcSgwKS50ZXh0KCkpO1xyXG4gIFxyXG4gICAgdmFyICRsaXN0ID0gJCgnPHVsIC8+Jywge1xyXG4gICAgICAgICdjbGFzcyc6ICdzZWxlY3Qtb3B0aW9ucydcclxuICAgIH0pLmluc2VydEFmdGVyKCRzdHlsZWRTZWxlY3QpO1xyXG4gIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZk9wdGlvbnM7IGkrKykge1xyXG4gICAgICAgICQoJzxsaSAvPicsIHtcclxuICAgICAgICAgICAgdGV4dDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnRleHQoKSxcclxuICAgICAgICAgICAgcmVsOiAkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoaSkudmFsKClcclxuICAgICAgICB9KS5hcHBlbmRUbygkbGlzdCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB2YXIgJGxpc3RJdGVtcyA9ICRsaXN0LmNoaWxkcmVuKCdsaScpO1xyXG4gIFxyXG4gICAgJHN0eWxlZFNlbGVjdC5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAkKCdkaXYuc2VsZWN0LXN0eWxlZC5hY3RpdmUnKS5ub3QodGhpcykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3Qtb3B0aW9ucycpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3Qtb3B0aW9ucycpLnRvZ2dsZSgpO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICAkbGlzdEl0ZW1zLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICRzdHlsZWRTZWxlY3QudGV4dCgkKHRoaXMpLnRleHQoKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICR0aGlzLnZhbCgkKHRoaXMpLmF0dHIoJ3JlbCcpKTtcclxuICAgICAgICAkbGlzdC5oaWRlKCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygkdGhpcy52YWwoKSk7XHJcbiAgICB9KTtcclxuICBcclxuICAgICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzdHlsZWRTZWxlY3QucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICRsaXN0LmhpZGUoKTtcclxuICAgIH0pO1xyXG5cclxufSk7IiwiJCgnLm5hdmJhci1uYXYtbWVudSBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIHNjcm9sbEFuY2hvciA9ICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnKSxcclxuICAgICAgICBzY3JvbGxQb2ludCA9ICQoJ3NlY3Rpb25bZGF0YS1hbmNob3I9XCInICsgc2Nyb2xsQW5jaG9yICsgJ1wiXScpLm9mZnNldCgpLnRvcCAtIDI4O1xyXG4gICAgICAgIGNvbnNvbGUuZGlyKHNjcm9sbFBvaW50KTtcclxuXHJcbiAgICAkKCdib2R5LGh0bWwnKS5hbmltYXRlKHtcclxuICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFBvaW50XHJcbiAgICB9LCA1MDApO1xyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcbn0pXHJcblxyXG5cclxuJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuICAgIHZhciB3aW5kc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgaWYgKHdpbmRzY3JvbGwgPj0gMTAwKSB7XHJcbiAgICAgXHJcbiAgICAgICAgJCgnbWFpbiBzZWN0aW9uJykuZWFjaChmdW5jdGlvbihpKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnBvc2l0aW9uKCkudG9wIDw9IHdpbmRzY3JvbGwgLSAyMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm5hdmJhci1uYXYtbWVudSBhLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5uYXZiYXItbmF2LW1lbnUgYScpLmVxKGkpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICQoJy5uYXZiYXItbmF2LW1lbnUnKS5yZW1vdmVDbGFzcygnZml4ZWQnKTtcclxuICAgICAgICAkKCcubmF2YmFyLW5hdi1tZW51IGEuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQoJy5uYXZiYXItbmF2LW1lbnUgYTpmaXJzdCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbn0pLnNjcm9sbCgpOyIsIi8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgXyBfIF9fX19fICAgICAgICAgICAgICAgICAgICAgIF8gICBfXHJcbiAgICAgICAgICAgICAgICAgICAgICB8IHwgfCAgX18gXFwgICAgICAgICAgICAgICAgICAgIHwgfCAoXylcclxuICAgIF9fXyAgX19fIF8gX18gX19fIHwgfCB8IHxfXykgfF9fX19fICAgX19fX18gIF9fIF98IHwgIF8gX19fXHJcbiAgIC8gX198LyBfX3wgJ19fLyBfIFxcfCB8IHwgIF8gIC8vIF8gXFwgXFwgLyAvIF8gXFwvIF9gIHwgfCB8IC8gX198XHJcbiAgIFxcX18gXFwgKF9ffCB8IHwgKF8pIHwgfCB8IHwgXFwgXFwgIF9fL1xcIFYgLyAgX18vIChffCB8IHxffCBcXF9fIFxcXHJcbiAgIHxfX18vXFxfX198X3wgIFxcX19fL3xffF98X3wgIFxcX1xcX19ffCBcXF8vIFxcX19ffFxcX18sX3xfKF8pIHxfX18vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy8gfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfF9fL1xyXG5cclxuICAgIFwiRGVjbGFyYXRpdmUgb24tc2Nyb2xsIHJldmVhbCBhbmltYXRpb25zLlwiXHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgc2Nyb2xsUmV2ZWFsLmpzIGlzIGluc3BpcmVkIGJ5IGNicFNjcm9sbGVyLmpzLCDCqSAyMDE0LCBDb2Ryb3BzLlxyXG5cclxuICAgIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICAgIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblxyXG4gICAgc2Nyb2xsUmV2ZWFsLmpzLCDCqSAyMDE0IGh0dHBzOi8vdHdpdHRlci5jb20vanVsaWFubGxveWRcclxuXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbjsoZnVuY3Rpb24gKHdpbmRvdykge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBkb2NFbGVtID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0Vmlld3BvcnRIICgpIHtcclxuICAgIHZhciBjbGllbnQgPSBkb2NFbGVtWydjbGllbnRIZWlnaHQnXSxcclxuICAgICAgaW5uZXIgPSB3aW5kb3dbJ2lubmVySGVpZ2h0J107XHJcblxyXG4gICAgcmV0dXJuIChjbGllbnQgPCBpbm5lcikgPyBpbm5lciA6IGNsaWVudDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE9mZnNldCAoZWwpIHtcclxuICAgIHZhciBvZmZzZXRUb3AgPSAwLFxyXG4gICAgICAgIG9mZnNldExlZnQgPSAwO1xyXG5cclxuICAgIGRvIHtcclxuICAgICAgaWYgKCFpc05hTihlbC5vZmZzZXRUb3ApKSB7XHJcbiAgICAgICAgb2Zmc2V0VG9wICs9IGVsLm9mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWlzTmFOKGVsLm9mZnNldExlZnQpKSB7XHJcbiAgICAgICAgb2Zmc2V0TGVmdCArPSBlbC5vZmZzZXRMZWZ0O1xyXG4gICAgICB9XHJcbiAgICB9IHdoaWxlIChlbCA9IGVsLm9mZnNldFBhcmVudClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3A6IG9mZnNldFRvcCxcclxuICAgICAgbGVmdDogb2Zmc2V0TGVmdFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNFbGVtZW50SW5WaWV3cG9ydCAoZWwsIGgpIHtcclxuICAgIHZhciBzY3JvbGxlZCA9IHdpbmRvdy5wYWdlWU9mZnNldCxcclxuICAgICAgICB2aWV3ZWQgPSBzY3JvbGxlZCArIGdldFZpZXdwb3J0SCgpLFxyXG4gICAgICAgIGVsSCA9IGVsLm9mZnNldEhlaWdodCxcclxuICAgICAgICBlbFRvcCA9IGdldE9mZnNldChlbCkudG9wLFxyXG4gICAgICAgIGVsQm90dG9tID0gZWxUb3AgKyBlbEgsXHJcbiAgICAgICAgaCA9IGggfHwgMDtcclxuXHJcbiAgICByZXR1cm4gKGVsVG9wICsgZWxIICogaCkgPD0gdmlld2VkICYmIChlbEJvdHRvbSkgPj0gc2Nyb2xsZWQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBleHRlbmQgKGEsIGIpIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBiKSB7XHJcbiAgICAgIGlmIChiLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBhW2tleV0gPSBiW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhO1xyXG4gIH1cclxuXHJcblxyXG4gIGZ1bmN0aW9uIHNjcm9sbFJldmVhbChvcHRpb25zKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IGV4dGVuZCh0aGlzLmRlZmF1bHRzLCBvcHRpb25zKTtcclxuICAgICAgdGhpcy5faW5pdCgpO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICBzY3JvbGxSZXZlYWwucHJvdG90eXBlID0ge1xyXG4gICAgZGVmYXVsdHM6IHtcclxuICAgICAgYXhpczogJ3knLFxyXG4gICAgICBkaXN0YW5jZTogJzI1cHgnLFxyXG4gICAgICBkdXJhdGlvbjogJzAuNjZzJyxcclxuICAgICAgZGVsYXk6ICcwcycsXHJcblxyXG4gIC8vICBpZiAwLCB0aGUgZWxlbWVudCBpcyBjb25zaWRlcmVkIGluIHRoZSB2aWV3cG9ydCBhcyBzb29uIGFzIGl0IGVudGVyc1xyXG4gIC8vICBpZiAxLCB0aGUgZWxlbWVudCBpcyBjb25zaWRlcmVkIGluIHRoZSB2aWV3cG9ydCB3aGVuIGl0J3MgZnVsbHkgdmlzaWJsZVxyXG4gICAgICB2aWV3cG9ydEZhY3RvcjogMC4zM1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBfaW5pdDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgdGhpcy5lbGVtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY0VsZW0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2Nyb2xsUmV2ZWFsXScpKTtcclxuICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG5cclxuICAvLyAgSW5pdGlhbGl6ZSBhbGwgc2Nyb2xscmV2ZWFscywgdHJpZ2dlcmluZyBhbGxcclxuICAvLyAgcmV2ZWFscyBvbiB2aXNpYmxlIGVsZW1lbnRzLlxyXG4gICAgICB0aGlzLmVsZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKGVsKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2YXIgc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXNlbGYuc2Nyb2xsZWQpIHtcclxuICAgICAgICAgIHNlbGYuc2Nyb2xsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX3Njcm9sbFBhZ2UoKTtcclxuICAgICAgICAgIH0sIDYwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgcmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBkZWxheWVkKCkge1xyXG4gICAgICAgICAgc2VsZi5fc2Nyb2xsUGFnZSgpO1xyXG4gICAgICAgICAgc2VsZi5yZXNpemVUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYucmVzaXplVGltZW91dCkge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYucmVzaXplVGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoZGVsYXllZCwgMjAwKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG5cclxuICAgIF9zY3JvbGxQYWdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnRJblZpZXdwb3J0KGVsLCBzZWxmLm9wdGlvbnMudmlld3BvcnRGYWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFuaW1hdGUoZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBwYXJzZUxhbmd1YWdlOiBmdW5jdGlvbiAoZWwpIHtcclxuXHJcbiAgLy8gIFNwbGl0cyBvbiBhIHNlcXVlbmNlIG9mIG9uZSBvciBtb3JlIGNvbW1hcywgcGVyaW9kcyBvciBzcGFjZXMuXHJcbiAgICAgIHZhciB3b3JkcyA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGxyZXZlYWwnKS5zcGxpdCgvWywgXSsvKSxcclxuICAgICAgICAgIGVudGVyRnJvbSxcclxuICAgICAgICAgIHBhcnNlZCA9IHt9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gZmlsdGVyICh3b3Jkcykge1xyXG4gICAgICAgIHZhciByZXQgPSBbXSxcclxuXHJcbiAgICAgICAgICAgIGJsYWNrbGlzdCA9IFtcclxuICAgICAgICAgICAgICBcImZyb21cIixcclxuICAgICAgICAgICAgICBcInRoZVwiLFxyXG4gICAgICAgICAgICAgIFwiYW5kXCIsXHJcbiAgICAgICAgICAgICAgXCJ0aGVuXCIsXHJcbiAgICAgICAgICAgICAgXCJidXRcIlxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICB3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkLCBpKSB7XHJcbiAgICAgICAgICBpZiAoYmxhY2tsaXN0LmluZGV4T2Yod29yZCkgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXQucHVzaCh3b3JkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgfVxyXG5cclxuICAgICAgd29yZHMgPSBmaWx0ZXIod29yZHMpO1xyXG5cclxuICAgICAgd29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCwgaSkge1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHdvcmQpIHtcclxuICAgICAgICAgIGNhc2UgXCJlbnRlclwiOlxyXG4gICAgICAgICAgICBlbnRlckZyb20gPSB3b3Jkc1tpICsgMV07XHJcblxyXG4gICAgICAgICAgICBpZiAoZW50ZXJGcm9tID09IFwidG9wXCIgfHwgZW50ZXJGcm9tID09IFwiYm90dG9tXCIpIHtcclxuICAgICAgICAgICAgICBwYXJzZWQuYXhpcyA9IFwieVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZW50ZXJGcm9tID09IFwibGVmdFwiIHx8IGVudGVyRnJvbSA9PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgICBwYXJzZWQuYXhpcyA9IFwieFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgY2FzZSBcImFmdGVyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kZWxheSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJ3YWl0XCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kZWxheSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJtb3ZlXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kaXN0YW5jZSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJvdmVyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kdXJhdGlvbiA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJ0cmlnZ2VyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5ldmVudE5hbWUgPSB3b3Jkc1tpICsgMV07XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vICBVbnJlY29nbml6YWJsZSB3b3JkczsgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIC8vICBBZnRlciBhbGwgdmFsdWVzIGFyZSBwYXJzZWQsIGxldOKAmXMgbWFrZSBzdXJlIG91ciBvdXJcclxuICAvLyAgcGl4ZWwgZGlzdGFuY2UgaXMgbmVnYXRpdmUgZm9yIHRvcCBhbmQgbGVmdCBlbnRyYW5jZXMuXHJcbiAgLy9cclxuICAvLyAgaWUuIFwibW92ZSAyNXB4IGZyb20gdG9wXCIgc3RhcnRzIGF0ICd0b3A6IC0yNXB4JyBpbiBDU1MuXHJcblxyXG4gICAgICBpZiAoZW50ZXJGcm9tID09IFwidG9wXCIgfHwgZW50ZXJGcm9tID09IFwibGVmdFwiKSB7XHJcblxyXG4gICAgICAgIGlmICghdHlwZW9mIHBhcnNlZC5kaXN0YW5jZSA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICBwYXJzZWQuZGlzdGFuY2UgPSBcIi1cIiArIHBhcnNlZC5kaXN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgcGFyc2VkLmRpc3RhbmNlID0gXCItXCIgKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgIH0sXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4gICAgZ2VuQ1NTOiBmdW5jdGlvbiAoZWwsIGF4aXMpIHtcclxuICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VMYW5ndWFnZShlbCk7XHJcblxyXG4gICAgICB2YXIgZGlzdCAgID0gcGFyc2VkLmRpc3RhbmNlIHx8IHRoaXMub3B0aW9ucy5kaXN0YW5jZSxcclxuICAgICAgICAgIGR1ciAgICA9IHBhcnNlZC5kdXJhdGlvbiB8fCB0aGlzLm9wdGlvbnMuZHVyYXRpb24sXHJcbiAgICAgICAgICBkZWxheSAgPSBwYXJzZWQuZGVsYXkgICAgfHwgdGhpcy5vcHRpb25zLmRlbGF5LFxyXG4gICAgICAgICAgYXhpcyAgID0gcGFyc2VkLmF4aXMgICAgIHx8IHRoaXMub3B0aW9ucy5heGlzO1xyXG5cclxuICAgICAgdmFyIHRyYW5zaXRpb24gPSBcIi13ZWJraXQtdHJhbnNpdGlvbjogYWxsIFwiICsgZHVyICsgXCIgZWFzZSBcIiArIGRlbGF5ICsgXCI7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiLW1vei10cmFuc2l0aW9uOiBhbGwgXCIgKyBkdXIgKyBcIiBlYXNlIFwiICsgZGVsYXkgKyBcIjtcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi1vLXRyYW5zaXRpb246IGFsbCBcIiArIGR1ciArIFwiIGVhc2UgXCIgKyBkZWxheSArIFwiO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNpdGlvbjogYWxsIFwiICsgZHVyICsgXCIgZWFzZSBcIiArIGRlbGF5ICsgXCI7XCI7XHJcblxyXG4gICAgICB2YXIgaW5pdGlhbCA9IFwiLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVwiICsgYXhpcyArIFwiKFwiICsgZGlzdCArIFwiKTtcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgXCItbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoXCIgKyBkaXN0ICsgXCIpO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNmb3JtOiB0cmFuc2xhdGVcIiArIGF4aXMgKyBcIihcIiArIGRpc3QgKyBcIik7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wYWNpdHk6IDA7XCI7XHJcblxyXG4gICAgICB2YXIgdGFyZ2V0ID0gXCItd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCItbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3BhY2l0eTogMTtcIjtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLFxyXG4gICAgICAgIGluaXRpYWw6IGluaXRpYWwsXHJcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICAgICAgdG90YWxEdXJhdGlvbjogKChwYXJzZUZsb2F0KGR1cikgKyBwYXJzZUZsb2F0KGRlbGF5KSkgKiAxMDAwKVxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBhbmltYXRlOiBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgdmFyIGNzcyA9IHRoaXMuZ2VuQ1NTKGVsKTtcclxuXHJcbiAgICAgIGlmICghZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNyLWluaXQnKSkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjc3MuaW5pdGlhbCk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXNyLWluaXQnLCB0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zci1jb21wbGV0ZScpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNFbGVtZW50SW5WaWV3cG9ydChlbCwgdGhpcy5vcHRpb25zLnZpZXdwb3J0RmFjdG9yKSkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjc3MudGFyZ2V0ICsgY3NzLnRyYW5zaXRpb24pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zci1jb21wbGV0ZScsIHRydWUpO1xyXG4gICAgICAgIH0sIGNzcy50b3RhbER1cmF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuICB9OyAvLyBlbmQgc2Nyb2xsUmV2ZWFsLnByb3RvdHlwZVxyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICB3aW5kb3cuc2Nyb2xsUmV2ZWFsID0gbmV3IHNjcm9sbFJldmVhbCgpO1xyXG4gIH0pO1xyXG5cclxufSkod2luZG93KTsiXX0=
