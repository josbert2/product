"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function c(t){console.log(t)}!function(o){o.fn.animateCSS=function(e,i,n){return this.each(function(){var t=o(this);i&&"function"!=typeof i||(n=i,i=0);setTimeout(function(){t.addClass("animated "+e),"hidden"==t.css("visibility")&&t.css({visibility:"visible"}),t.is(":hidden")&&t.show(),t.bind("webkitAnimationEnd animationend oAnimationEnd",function(){"function"==typeof n&&n.call(this)})},i)})}}(jQuery),$(function(){$(window).scroll(function(){300<$(this).scrollTop()?($(".go-top").addClass("expand"),$(".page-header-alpha").addClass("scroll")):($(".go-top").removeClass("expand"),$(".page-header-alpha").removeClass("scroll"))}),$(".go-top").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},1e3)})});var $this=$(void 0);$("html").easeScroll(),$(document).ready(function(){var i=$(".owl-carousel");function e(t,i){t.each(function(){var t=$(this),e="animated "+t.data("animation-"+i);t.addClass(e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.removeClass(e)})})}i.owlCarousel({loop:!1,margin:0,center:!0,navSpeed:500,nav:!0,touchDrag:!1,mouseDrag:!1,rewind:!0,items:1}),i.on("change.owl.carousel",function(t){e($(".owl-item",i).eq(t.item.index).find("[data-animation-out]"),"out")});var n=0;i.on("changed.owl.carousel",function(t){e($(".owl-item",i).eq(t.item.index).find("[data-animation-in]"),"in")}),i.on("translated.owl.carousel",function(t){if(console.log(t.item.index,t.page.count),t.item.index==t.page.count-1)if(n<1)n++,console.log(n);else{i.trigger("stop.owl.autoplay");var e=i.data("owl.carousel");e.settings.autoplay=!1,e.options.autoplay=!1,i.trigger("refresh.owl.carousel")}})});var icon=$(".navbar-toggler");function getSlide(){return $(window).width()<601?1:3}icon.click(function(){$(".menu-i").toggleClass("open-nav"),$("#navbarMenu").toggleClass("menu-visible")});var swiper=new Swiper(".swiper-container",{effect:"coverflow",loop:!0,centeredSlides:!0,slidesPerView:getSlide(),initialSlide:3,keyboardControl:!0,mousewheelControl:!1,pagination:".screen-pagination",preventClicks:!1,preventClicksPropagation:!1,lazyLoadingInPrevNext:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",coverflow:{rotate:0,stretch:0,depth:250,modifier:1,slideShadows:!0}});$("select").each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var i=e.next("div.select-styled");i.text(e.children("option").eq(0).text());for(var n=$("<ul />",{class:"select-options"}).insertAfter(i),o=0;o<t;o++)$("<li />",{text:e.children("option").eq(o).text(),rel:e.children("option").eq(o).val()}).appendTo(n);var a=n.children("li");i.click(function(t){t.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),a.click(function(t){t.stopPropagation(),i.text($(this).text()).removeClass("active"),e.val($(this).attr("rel")),n.hide()}),$(document).click(function(){i.removeClass("active"),n.hide()})}),function(l){var c=l.document.documentElement;function n(t,e){var i,n,o=l.pageYOffset,a=o+(i=c.clientHeight,n=l.innerHeight,i<n?n:i),s=t.offsetHeight,r=function(t){for(var e=0,i=0;isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(i+=t.offsetLeft),t=t.offsetParent;);return{top:e,left:i}}(t).top;return r+s*(e=e||0)<=a&&o<=r+s}function e(t){this.options=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this.defaults,t),this._init()}e.prototype={defaults:{axis:"y",distance:"25px",duration:"0.66s",delay:"0s",viewportFactor:.33},_init:function(){var i=this;this.elems=Array.prototype.slice.call(c.querySelectorAll("[data-scrollReveal]")),this.scrolled=!1,this.elems.forEach(function(t,e){i.animate(t)});l.addEventListener("scroll",function(){i.scrolled||(i.scrolled=!0,setTimeout(function(){i._scrollPage()},60))},!1),l.addEventListener("resize",function(){i.resizeTimeout&&clearTimeout(i.resizeTimeout),i.resizeTimeout=setTimeout(function(){i._scrollPage(),i.resizeTimeout=null},200)},!1)},_scrollPage:function(){var i=this;this.elems.forEach(function(t,e){n(t,i.options.viewportFactor)&&i.animate(t)}),this.scrolled=!1},parseLanguage:function(t){var i,n,o,a=t.getAttribute("data-scrollreveal").split(/[, ]+/),s={};return n=[],o=["from","the","and","then","but"],a.forEach(function(t,e){-1<o.indexOf(t)||n.push(t)}),(a=n).forEach(function(t,e){switch(t){case"enter":return"top"!=(i=a[e+1])&&"bottom"!=i||(s.axis="y"),void("left"!=i&&"right"!=i||(s.axis="x"));case"after":case"wait":return void(s.delay=a[e+1]);case"move":return void(s.distance=a[e+1]);case"over":return void(s.duration=a[e+1]);case"trigger":return void(s.eventName=a[e+1]);default:return}}),"top"!=i&&"left"!=i||("undefined"==!_typeof(s.distance)?s.distance="-"+s.distance:s.distance="-"+this.options.distance),s},genCSS:function(t,e){var i=this.parseLanguage(t),n=i.distance||this.options.distance,o=i.duration||this.options.duration,a=i.delay||this.options.delay;return{transition:"-webkit-transition: all "+o+" ease "+a+";-moz-transition: all "+o+" ease "+a+";-o-transition: all "+o+" ease "+a+";transition: all "+o+" ease "+a+";",initial:"-webkit-transform: translate"+(e=i.axis||this.options.axis)+"("+n+");-moz-transform: translate"+e+"("+n+");transform: translate"+e+"("+n+");opacity: 0;",target:"-webkit-transform: translate"+e+"(0);-moz-transform: translate"+e+"(0);transform: translate"+e+"(0);opacity: 1;",totalDuration:1e3*(parseFloat(o)+parseFloat(a))}},animate:function(t){var e=this.genCSS(t);t.getAttribute("data-sr-init")||(t.setAttribute("style",e.initial),t.setAttribute("data-sr-init",!0)),t.getAttribute("data-sr-complete")||n(t,this.options.viewportFactor)&&(t.setAttribute("style",e.target+e.transition),setTimeout(function(){t.removeAttribute("style"),t.setAttribute("data-sr-complete",!0)},e.totalDuration))}},document.addEventListener("DOMContentLoaded",function(t){l.scrollReveal=new e})}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiYW5pbWF0ZS5qcyIsInNlbGVjdC5qcyIsInhyZXZlbC5qcyJdLCJuYW1lcyI6WyJjIiwibCIsImNvbnNvbGUiLCJsb2ciLCIkIiwiZm4iLCJhbmltYXRlQ1NTIiwiZWZmZWN0IiwiZGVsYXkiLCJjYWxsYmFjayIsInRoaXMiLCJlYWNoIiwiJHRoaXMiLCJzZXRUaW1lb3V0IiwiYWRkQ2xhc3MiLCJjc3MiLCJ2aXNpYmlsaXR5IiwiaXMiLCJzaG93IiwiYmluZCIsImNhbGwiLCJqUXVlcnkiLCJ3aW5kb3ciLCJzY3JvbGwiLCJzY3JvbGxUb3AiLCJyZW1vdmVDbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJlYXNlU2Nyb2xsIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm93bCIsInNldEFuaW1hdGlvbiIsIl9lbGVtIiwiX0luT3V0IiwiJGVsZW0iLCIkYW5pbWF0aW9uVHlwZSIsImRhdGEiLCJvbmUiLCJvd2xDYXJvdXNlbCIsImxvb3AiLCJtYXJnaW4iLCJjZW50ZXIiLCJuYXZTcGVlZCIsIm5hdiIsInRvdWNoRHJhZyIsIm1vdXNlRHJhZyIsInJld2luZCIsIml0ZW1zIiwib24iLCJlcSIsIml0ZW0iLCJpbmRleCIsImZpbmQiLCJyb3VuZCIsInBhZ2UiLCJjb3VudCIsInRyaWdnZXIiLCJvd2xEYXRhIiwic2V0dGluZ3MiLCJhdXRvcGxheSIsIm9wdGlvbnMiLCJpY29uIiwiZ2V0U2xpZGUiLCJ3aWR0aCIsInRvZ2dsZUNsYXNzIiwic3dpcGVyIiwiU3dpcGVyIiwiY2VudGVyZWRTbGlkZXMiLCJzbGlkZXNQZXJWaWV3IiwiaW5pdGlhbFNsaWRlIiwia2V5Ym9hcmRDb250cm9sIiwibW91c2V3aGVlbENvbnRyb2wiLCJwYWdpbmF0aW9uIiwicHJldmVudENsaWNrcyIsInByZXZlbnRDbGlja3NQcm9wYWdhdGlvbiIsImxhenlMb2FkaW5nSW5QcmV2TmV4dCIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwiY292ZXJmbG93Iiwicm90YXRlIiwic3RyZXRjaCIsImRlcHRoIiwibW9kaWZpZXIiLCJzbGlkZVNoYWRvd3MiLCJudW1iZXJPZk9wdGlvbnMiLCJjaGlsZHJlbiIsImxlbmd0aCIsIndyYXAiLCJhZnRlciIsIiRzdHlsZWRTZWxlY3QiLCJuZXh0IiwidGV4dCIsIiRsaXN0IiwiY2xhc3MiLCJpbnNlcnRBZnRlciIsImkiLCJyZWwiLCJ2YWwiLCJhcHBlbmRUbyIsIiRsaXN0SXRlbXMiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwibm90IiwiaGlkZSIsInRvZ2dsZSIsImF0dHIiLCJkb2NFbGVtIiwiZG9jdW1lbnRFbGVtZW50IiwiaXNFbGVtZW50SW5WaWV3cG9ydCIsImVsIiwiaCIsImNsaWVudCIsImlubmVyIiwic2Nyb2xsZWQiLCJwYWdlWU9mZnNldCIsInZpZXdlZCIsImVsSCIsIm9mZnNldEhlaWdodCIsImVsVG9wIiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsImlzTmFOIiwib2Zmc2V0UGFyZW50IiwidG9wIiwibGVmdCIsImdldE9mZnNldCIsInNjcm9sbFJldmVhbCIsImEiLCJiIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJleHRlbmQiLCJkZWZhdWx0cyIsIl9pbml0IiwicHJvdG90eXBlIiwiYXhpcyIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJ2aWV3cG9ydEZhY3RvciIsInNlbGYiLCJlbGVtcyIsIkFycmF5Iiwic2xpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfc2Nyb2xsUGFnZSIsInJlc2l6ZVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJwYXJzZUxhbmd1YWdlIiwiZW50ZXJGcm9tIiwicmV0IiwiYmxhY2tsaXN0Iiwid29yZHMiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpdCIsInBhcnNlZCIsIndvcmQiLCJpbmRleE9mIiwicHVzaCIsImV2ZW50TmFtZSIsIl90eXBlb2YiLCJnZW5DU1MiLCJkaXN0IiwiZHVyIiwidHJhbnNpdGlvbiIsImluaXRpYWwiLCJ0YXJnZXQiLCJ0b3RhbER1cmF0aW9uIiwicGFyc2VGbG9hdCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImV2dCJdLCJtYXBwaW5ncyI6Im1PQTBCQSxTQUFBQSxFQUFBQyxHQUNBQyxRQUFBQyxJQUFBRixJQzNCQSxTQUFBRyxHQUVBQSxFQUFBQyxHQUFBQyxXQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBR0EsT0FBQUMsS0FBQUMsS0FBQSxXQUdBLElBQUFDLEVBQUFSLEVBQUFNLE1BR0FGLEdBQUEsbUJBQUFBLElBR0FDLEVBQUFELEVBR0FBLEVBQUEsR0FJQUssV0FBQSxXQUdBRCxFQUFBRSxTQUFBLFlBQUFQLEdBR0EsVUFBQUssRUFBQUcsSUFBQSxlQUdBSCxFQUFBRyxLQUNBQyxXQUFBLFlBTUFKLEVBQUFLLEdBQUEsWUFHQUwsRUFBQU0sT0FLQU4sRUFBQU8sS0FBQSxnREFBQSxXQUdBLG1CQUFBVixHQUdBQSxFQUFBVyxLQUFBVixTQU9BRixNQTFEQSxDQWdFQWEsUUQ5REFqQixFQUFBLFdBRUFBLEVBQUFrQixRQUFBQyxPQUFBLFdBQ0EsSUFBQW5CLEVBQUFNLE1BQUFjLGFBQ0FwQixFQUFBLFdBQUFVLFNBQUEsVUFDQVYsRUFBQSxzQkFBQVUsU0FBQSxZQUVBVixFQUFBLFdBQUFxQixZQUFBLFVBQ0FyQixFQUFBLHNCQUFBcUIsWUFBQSxhQUtBckIsRUFBQSxXQUFBc0IsTUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFFQXhCLEVBQUEsY0FBQXlCLFNBQ0FMLFVBQUEsR0FDQSxTQVNBLElBQUFaLE1BQUFSLE9BQUFBLEdBQ0FBLEVBQUEsUUFBQTBCLGFBRUExQixFQUFBMkIsVUFBQUMsTUFBQSxXQUVBLElBQUFDLEVBQUE3QixFQUFBLGlCQWlCQSxTQUFBOEIsRUFBQUMsRUFBQUMsR0FLQUQsRUFBQXhCLEtBQUEsV0FDQSxJQUFBMEIsRUFBQWpDLEVBQUFNLE1BRUE0QixFQUFBLFlBQUFELEVBQUFFLEtBQUEsYUFBQUgsR0FDQUMsRUFB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SixFQUFBeUosWUFFQTNKLFdBQUEsV0FDQW1HLEVBQUE4RCxnQkFBQSxTQUNBOUQsRUFBQTZELGFBQUEsb0JBQUEsSUFDQTlKLEVBQUE0SixrQkFNQTVJLFNBQUFxSCxpQkFBQSxtQkFBQSxTQUFBMkIsR0FDQXpKLEVBQUEyRyxhQUFBLElBQUFBLElBclJBLENBd1JBM0ciLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG4vLyBHbyBUT1BcclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBTaG93IG9yIGhpZGUgdGhlIHN0aWNreSBmb290ZXIgYnV0dG9uXHJcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiAzMDApIHtcclxuICAgICAgICAkKCcuZ28tdG9wJykuYWRkQ2xhc3MoJ2V4cGFuZCcpO1xyXG4gICAgICAgICQoJy5wYWdlLWhlYWRlci1hbHBoYScpLmFkZENsYXNzKCdzY3JvbGwnKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5nby10b3AnKS5yZW1vdmVDbGFzcygnZXhwYW5kJyk7XHJcbiAgICAgICAgICQoJy5wYWdlLWhlYWRlci1hbHBoYScpLnJlbW92ZUNsYXNzKCdzY3JvbGwnKVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBbmltYXRlIHRoZSBzY3JvbGwgdG8gdG9wXHJcbiAgICAkKCcuZ28tdG9wJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgc2Nyb2xsVG9wOiAwXHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuXHJcblxyXG4gIH0pO1xyXG5cclxuICAgZnVuY3Rpb24gYyAobCl7XHJcbiAgIFx0Y29uc29sZS5sb2cobCk7XHJcbiAgIH1cclxuICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgJChcImh0bWxcIikuZWFzZVNjcm9sbCgpO1xyXG4vL09XTCBDQVJPVVNFTFxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKXtcclxuICAvLyBEZWNsYXJlIENhcm91c2VsIGpxdWVyeSBvYmplY3RcclxuICB2YXIgb3dsID0gJCgnLm93bC1jYXJvdXNlbCcpO1xyXG5cclxuICAvLyBDYXJvdXNlbCBpbml0aWFsaXphdGlvblxyXG4gIG93bC5vd2xDYXJvdXNlbCh7XHJcbiAgICAgIGxvb3A6ZmFsc2UsXHJcbiAgICAgIG1hcmdpbjowLFxyXG4gICAgICBjZW50ZXI6IHRydWUsXHJcbiAgICAgIG5hdlNwZWVkOjUwMCxcclxuICAgICAgbmF2OnRydWUsXHJcbiAgICAgIHRvdWNoRHJhZyAgOiBmYWxzZSxcclxuICAgICAgbW91c2VEcmFnICA6IGZhbHNlLFxyXG4gICAgICByZXdpbmQ6IHRydWUsXHJcbiAgICAgIGl0ZW1zOjFcclxuICB9KTtcclxuXHJcblxyXG4gIC8vIGFkZCBhbmltYXRlLmNzcyBjbGFzcyhlcykgdG8gdGhlIGVsZW1lbnRzIHRvIGJlIGFuaW1hdGVkXHJcbiAgZnVuY3Rpb24gc2V0QW5pbWF0aW9uICggX2VsZW0sIF9Jbk91dCApIHtcclxuICAgIC8vIFN0b3JlIGFsbCBhbmltYXRpb25lbmQgZXZlbnQgbmFtZSBpbiBhIHN0cmluZy5cclxuICAgIC8vIGNmIGFuaW1hdGUuY3NzIGRvY3VtZW50YXRpb25cclxuICAgIHZhciBhbmltYXRpb25FbmRFdmVudCA9ICd3ZWJraXRBbmltYXRpb25FbmQgbW96QW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgYW5pbWF0aW9uZW5kJztcclxuXHJcbiAgICBfZWxlbS5lYWNoICggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgdmFyICRlbGVtID0gJCh0aGlzKTtcclxuXHJcbiAgICAgIHZhciAkYW5pbWF0aW9uVHlwZSA9ICdhbmltYXRlZCAnICsgJGVsZW0uZGF0YSggJ2FuaW1hdGlvbi0nICsgX0luT3V0ICk7XHJcbiAgICAgICRlbGVtLmFkZENsYXNzKCRhbmltYXRpb25UeXBlKS5vbmUoYW5pbWF0aW9uRW5kRXZlbnQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgIFxyXG4gICAgICAgICRlbGVtLnJlbW92ZUNsYXNzKCRhbmltYXRpb25UeXBlKTsgLy8gcmVtb3ZlIGFuaW1hdGUuY3NzIENsYXNzIGF0IHRoZSBlbmQgb2YgdGhlIGFuaW1hdGlvbnNcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4vLyBGaXJlZCBiZWZvcmUgY3VycmVudCBzbGlkZSBjaGFuZ2VcclxuICBvd2wub24oJ2NoYW5nZS5vd2wuY2Fyb3VzZWwnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgJGN1cnJlbnRJdGVtID0gJCgnLm93bC1pdGVtJywgb3dsKS5lcShldmVudC5pdGVtLmluZGV4KTtcclxuICAgICAgdmFyICRlbGVtc1RvYW5pbSA9ICRjdXJyZW50SXRlbS5maW5kKFwiW2RhdGEtYW5pbWF0aW9uLW91dF1cIik7XHJcbiAgICAgIHNldEFuaW1hdGlvbiAoJGVsZW1zVG9hbmltLCAnb3V0Jyk7XHJcblxyXG4gIH0pO1xyXG5cclxuLy8gRmlyZWQgYWZ0ZXIgY3VycmVudCBzbGlkZSBoYXMgYmVlbiBjaGFuZ2VkXHJcbiAgdmFyIHJvdW5kID0gMDtcclxuICBvd2wub24oJ2NoYW5nZWQub3dsLmNhcm91c2VsJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICAgIHZhciAkY3VycmVudEl0ZW0gPSAkKCcub3dsLWl0ZW0nLCBvd2wpLmVxKGV2ZW50Lml0ZW0uaW5kZXgpO1xyXG4gICAgICB2YXIgJGVsZW1zVG9hbmltID0gJGN1cnJlbnRJdGVtLmZpbmQoXCJbZGF0YS1hbmltYXRpb24taW5dXCIpO1xyXG4gICAgXHJcbiAgICAgIHNldEFuaW1hdGlvbiAoJGVsZW1zVG9hbmltLCAnaW4nKTtcclxuICB9KVxyXG4gIFxyXG4gIG93bC5vbigndHJhbnNsYXRlZC5vd2wuY2Fyb3VzZWwnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgY29uc29sZS5sb2cgKGV2ZW50Lml0ZW0uaW5kZXgsIGV2ZW50LnBhZ2UuY291bnQpO1xyXG4gICAgXHJcbiAgICAgIGlmIChldmVudC5pdGVtLmluZGV4ID09IChldmVudC5wYWdlLmNvdW50IC0gMSkpICB7XHJcbiAgICAgICAgaWYgKHJvdW5kIDwgMSkge1xyXG4gICAgICAgICAgcm91bmQrK1xyXG4gICAgICAgICAgY29uc29sZS5sb2cgKHJvdW5kKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgb3dsLnRyaWdnZXIoJ3N0b3Aub3dsLmF1dG9wbGF5Jyk7XHJcbiAgICAgICAgICB2YXIgb3dsRGF0YSA9IG93bC5kYXRhKCdvd2wuY2Fyb3VzZWwnKTtcclxuICAgICAgICAgIG93bERhdGEuc2V0dGluZ3MuYXV0b3BsYXkgPSBmYWxzZTsgLy9kb24ndCBrbm93IGlmIGJvdGggYXJlIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgb3dsRGF0YS5vcHRpb25zLmF1dG9wbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgICBvd2wudHJpZ2dlcigncmVmcmVzaC5vd2wuY2Fyb3VzZWwnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICB9KTtcclxuXHJcbn0pO1xyXG5cclxuXHJcbi8vTmF2YmFyXHJcbnZhciBpY29uID0gJCgnLm5hdmJhci10b2dnbGVyJyk7XHJcblxyXG5pY29uLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgJCgnLm1lbnUtaScpLnRvZ2dsZUNsYXNzKCdvcGVuLW5hdicpO1xyXG4gICQoJyNuYXZiYXJNZW51JykudG9nZ2xlQ2xhc3MoJ21lbnUtdmlzaWJsZScpO1xyXG5cclxufSlcclxuXHJcbiAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAgIEZvdG9zIGNhcm91c2VsXHJcbiAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8gIFxyXG5cclxuICAgICBmdW5jdGlvbiBnZXRTbGlkZSgpIHtcclxuICAgICAgICB2YXIgd1cgPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgICBpZiAod1cgPCA2MDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAzO1xyXG4gICAgfVxyXG52YXIgc3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci1jb250YWluZXInLCB7XHJcbiAgZWZmZWN0OiAnY292ZXJmbG93JyxcclxuICBsb29wOiB0cnVlLFxyXG4gIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gIHNsaWRlc1BlclZpZXc6IGdldFNsaWRlKCksXHJcbiAgaW5pdGlhbFNsaWRlOiAzLFxyXG4gIGtleWJvYXJkQ29udHJvbDogdHJ1ZSxcclxuICBtb3VzZXdoZWVsQ29udHJvbDogZmFsc2UsXHJcbiBwYWdpbmF0aW9uOiAnLnNjcmVlbi1wYWdpbmF0aW9uJyxcclxuICBwcmV2ZW50Q2xpY2tzOiBmYWxzZSxcclxuICBwcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb246IGZhbHNlLFxyXG4gIGxhenlMb2FkaW5nSW5QcmV2TmV4dDogdHJ1ZSxcclxuICBuZXh0QnV0dG9uOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgIHByZXZCdXR0b246ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICBjb3ZlcmZsb3c6IHtcclxuICAgIHJvdGF0ZTogMCxcclxuICAgIHN0cmV0Y2g6IDAsXHJcbiAgICBkZXB0aDogMjUwLFxyXG4gICAgbW9kaWZpZXI6IDEsXHJcbiAgICBzbGlkZVNoYWRvd3MgOiB0cnVlLFxyXG4gIH1cclxufSk7XHJcbiAgICAgICAgICBcclxuIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICAgRm90b3MgY2Fyb3VzZWxcclxuICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLyAgIiwiKGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gICAgJC5mbi5hbmltYXRlQ1NTID0gZnVuY3Rpb24gKGVmZmVjdCwgZGVsYXksIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB0aGlzIHRvIG1haW50YWluIGNoYWluYWJpbGl0eVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FjaGUgJCh0aGlzKSBmb3Igc3BlZWRcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGRlbGF5IGV4aXN0cyBvciBpZiBpdCdzIGEgY2FsbGJhY2tcclxuICAgICAgICAgICAgaWYgKCFkZWxheSB8fCB0eXBlb2YgZGVsYXkgPT0gJ2Z1bmN0aW9uJykge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBjYWxsYmFjaywgbW92ZSBpdCB0byBjYWxsYmFjayBzbyB3ZSBjYW4gY2FsbCBpdCBsYXRlclxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBkZWxheTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGRlbGF5IHRvIDAgZm9yIHRoZSBzZXRUaW1lb3V0XHJcbiAgICAgICAgICAgICAgICBkZWxheSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgY291bnRlciBzbyB3ZSBjYW4gZGVsYXkgdGhlIGFuaW1hdGlvbiBpZiByZXF1aXJlZFxyXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBhbmltYXRpb24gZWZmZWN0IHdpdGggY2xhc3Nlc1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2FuaW1hdGVkICcgKyBlZmZlY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBlbGVtZW5yIGhhcyBiZWVuIGhpZGRlbiB0byBzdGFydCB3aXRoXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuY3NzKCd2aXNpYmlsaXR5JykgPT0gJ2hpZGRlbicpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQgaGFzLCBzaG93IGl0IChhZnRlciB0aGUgY2xhc3MgaGFzIGJlZW4gYWRkZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZSdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgaGlkZGVuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuaXMoJzpoaWRkZW4nKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IGl0XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFdmVudCB0cmlnZ2VyZWQgd2hlbiB0aGUgYW5pbWF0aW9uIGhhcyBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICAgJHRoaXMuYmluZCgnd2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCBvQW5pbWF0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBjYWxsYmFjayBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU3BlY2lmeSB0aGUgZGVsYXlcclxuICAgICAgICAgICAgfSwgZGVsYXkpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxufSkoalF1ZXJ5KTsiLCIkKCdzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLCBudW1iZXJPZk9wdGlvbnMgPSAkKHRoaXMpLmNoaWxkcmVuKCdvcHRpb24nKS5sZW5ndGg7XHJcbiAgXHJcbiAgICAkdGhpcy5hZGRDbGFzcygnc2VsZWN0LWhpZGRlbicpOyBcclxuICAgICR0aGlzLndyYXAoJzxkaXYgY2xhc3M9XCJzZWxlY3RcIj48L2Rpdj4nKTtcclxuICAgICR0aGlzLmFmdGVyKCc8ZGl2IGNsYXNzPVwic2VsZWN0LXN0eWxlZFwiPjwvZGl2PicpO1xyXG5cclxuICAgIHZhciAkc3R5bGVkU2VsZWN0ID0gJHRoaXMubmV4dCgnZGl2LnNlbGVjdC1zdHlsZWQnKTtcclxuICAgICRzdHlsZWRTZWxlY3QudGV4dCgkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoMCkudGV4dCgpKTtcclxuICBcclxuICAgIHZhciAkbGlzdCA9ICQoJzx1bCAvPicsIHtcclxuICAgICAgICAnY2xhc3MnOiAnc2VsZWN0LW9wdGlvbnMnXHJcbiAgICB9KS5pbnNlcnRBZnRlcigkc3R5bGVkU2VsZWN0KTtcclxuICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZPcHRpb25zOyBpKyspIHtcclxuICAgICAgICAkKCc8bGkgLz4nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcShpKS50ZXh0KCksXHJcbiAgICAgICAgICAgIHJlbDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnZhbCgpXHJcbiAgICAgICAgfSkuYXBwZW5kVG8oJGxpc3QpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgdmFyICRsaXN0SXRlbXMgPSAkbGlzdC5jaGlsZHJlbignbGknKTtcclxuICBcclxuICAgICRzdHlsZWRTZWxlY3QuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJCgnZGl2LnNlbGVjdC1zdHlsZWQuYWN0aXZlJykubm90KHRoaXMpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0LW9wdGlvbnMnKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0LW9wdGlvbnMnKS50b2dnbGUoKTtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgJGxpc3RJdGVtcy5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAkc3R5bGVkU2VsZWN0LnRleHQoJCh0aGlzKS50ZXh0KCkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkdGhpcy52YWwoJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcbiAgICAgICAgJGxpc3QuaGlkZSgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJHRoaXMudmFsKCkpO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICAkKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAkc3R5bGVkU2VsZWN0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkbGlzdC5oaWRlKCk7XHJcbiAgICB9KTtcclxuXHJcbn0pOyIsIi8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgXyBfIF9fX19fICAgICAgICAgICAgICAgICAgICAgIF8gICBfXHJcbiAgICAgICAgICAgICAgICAgICAgICB8IHwgfCAgX18gXFwgICAgICAgICAgICAgICAgICAgIHwgfCAoXylcclxuICAgIF9fXyAgX19fIF8gX18gX19fIHwgfCB8IHxfXykgfF9fX19fICAgX19fX18gIF9fIF98IHwgIF8gX19fXHJcbiAgIC8gX198LyBfX3wgJ19fLyBfIFxcfCB8IHwgIF8gIC8vIF8gXFwgXFwgLyAvIF8gXFwvIF9gIHwgfCB8IC8gX198XHJcbiAgIFxcX18gXFwgKF9ffCB8IHwgKF8pIHwgfCB8IHwgXFwgXFwgIF9fL1xcIFYgLyAgX18vIChffCB8IHxffCBcXF9fIFxcXHJcbiAgIHxfX18vXFxfX198X3wgIFxcX19fL3xffF98X3wgIFxcX1xcX19ffCBcXF8vIFxcX19ffFxcX18sX3xfKF8pIHxfX18vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy8gfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfF9fL1xyXG5cclxuICAgIFwiRGVjbGFyYXRpdmUgb24tc2Nyb2xsIHJldmVhbCBhbmltYXRpb25zLlwiXHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgc2Nyb2xsUmV2ZWFsLmpzIGlzIGluc3BpcmVkIGJ5IGNicFNjcm9sbGVyLmpzLCDCqSAyMDE0LCBDb2Ryb3BzLlxyXG5cclxuICAgIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICAgIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblxyXG4gICAgc2Nyb2xsUmV2ZWFsLmpzLCDCqSAyMDE0IGh0dHBzOi8vdHdpdHRlci5jb20vanVsaWFubGxveWRcclxuXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbjsoZnVuY3Rpb24gKHdpbmRvdykge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBkb2NFbGVtID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0Vmlld3BvcnRIICgpIHtcclxuICAgIHZhciBjbGllbnQgPSBkb2NFbGVtWydjbGllbnRIZWlnaHQnXSxcclxuICAgICAgaW5uZXIgPSB3aW5kb3dbJ2lubmVySGVpZ2h0J107XHJcblxyXG4gICAgcmV0dXJuIChjbGllbnQgPCBpbm5lcikgPyBpbm5lciA6IGNsaWVudDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE9mZnNldCAoZWwpIHtcclxuICAgIHZhciBvZmZzZXRUb3AgPSAwLFxyXG4gICAgICAgIG9mZnNldExlZnQgPSAwO1xyXG5cclxuICAgIGRvIHtcclxuICAgICAgaWYgKCFpc05hTihlbC5vZmZzZXRUb3ApKSB7XHJcbiAgICAgICAgb2Zmc2V0VG9wICs9IGVsLm9mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWlzTmFOKGVsLm9mZnNldExlZnQpKSB7XHJcbiAgICAgICAgb2Zmc2V0TGVmdCArPSBlbC5vZmZzZXRMZWZ0O1xyXG4gICAgICB9XHJcbiAgICB9IHdoaWxlIChlbCA9IGVsLm9mZnNldFBhcmVudClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3A6IG9mZnNldFRvcCxcclxuICAgICAgbGVmdDogb2Zmc2V0TGVmdFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNFbGVtZW50SW5WaWV3cG9ydCAoZWwsIGgpIHtcclxuICAgIHZhciBzY3JvbGxlZCA9IHdpbmRvdy5wYWdlWU9mZnNldCxcclxuICAgICAgICB2aWV3ZWQgPSBzY3JvbGxlZCArIGdldFZpZXdwb3J0SCgpLFxyXG4gICAgICAgIGVsSCA9IGVsLm9mZnNldEhlaWdodCxcclxuICAgICAgICBlbFRvcCA9IGdldE9mZnNldChlbCkudG9wLFxyXG4gICAgICAgIGVsQm90dG9tID0gZWxUb3AgKyBlbEgsXHJcbiAgICAgICAgaCA9IGggfHwgMDtcclxuXHJcbiAgICByZXR1cm4gKGVsVG9wICsgZWxIICogaCkgPD0gdmlld2VkICYmIChlbEJvdHRvbSkgPj0gc2Nyb2xsZWQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBleHRlbmQgKGEsIGIpIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBiKSB7XHJcbiAgICAgIGlmIChiLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBhW2tleV0gPSBiW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhO1xyXG4gIH1cclxuXHJcblxyXG4gIGZ1bmN0aW9uIHNjcm9sbFJldmVhbChvcHRpb25zKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IGV4dGVuZCh0aGlzLmRlZmF1bHRzLCBvcHRpb25zKTtcclxuICAgICAgdGhpcy5faW5pdCgpO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICBzY3JvbGxSZXZlYWwucHJvdG90eXBlID0ge1xyXG4gICAgZGVmYXVsdHM6IHtcclxuICAgICAgYXhpczogJ3knLFxyXG4gICAgICBkaXN0YW5jZTogJzI1cHgnLFxyXG4gICAgICBkdXJhdGlvbjogJzAuNjZzJyxcclxuICAgICAgZGVsYXk6ICcwcycsXHJcblxyXG4gIC8vICBpZiAwLCB0aGUgZWxlbWVudCBpcyBjb25zaWRlcmVkIGluIHRoZSB2aWV3cG9ydCBhcyBzb29uIGFzIGl0IGVudGVyc1xyXG4gIC8vICBpZiAxLCB0aGUgZWxlbWVudCBpcyBjb25zaWRlcmVkIGluIHRoZSB2aWV3cG9ydCB3aGVuIGl0J3MgZnVsbHkgdmlzaWJsZVxyXG4gICAgICB2aWV3cG9ydEZhY3RvcjogMC4zM1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBfaW5pdDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgdGhpcy5lbGVtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY0VsZW0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2Nyb2xsUmV2ZWFsXScpKTtcclxuICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG5cclxuICAvLyAgSW5pdGlhbGl6ZSBhbGwgc2Nyb2xscmV2ZWFscywgdHJpZ2dlcmluZyBhbGxcclxuICAvLyAgcmV2ZWFscyBvbiB2aXNpYmxlIGVsZW1lbnRzLlxyXG4gICAgICB0aGlzLmVsZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKGVsKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2YXIgc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXNlbGYuc2Nyb2xsZWQpIHtcclxuICAgICAgICAgIHNlbGYuc2Nyb2xsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX3Njcm9sbFBhZ2UoKTtcclxuICAgICAgICAgIH0sIDYwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgcmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBkZWxheWVkKCkge1xyXG4gICAgICAgICAgc2VsZi5fc2Nyb2xsUGFnZSgpO1xyXG4gICAgICAgICAgc2VsZi5yZXNpemVUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYucmVzaXplVGltZW91dCkge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYucmVzaXplVGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoZGVsYXllZCwgMjAwKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG5cclxuICAgIF9zY3JvbGxQYWdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnRJblZpZXdwb3J0KGVsLCBzZWxmLm9wdGlvbnMudmlld3BvcnRGYWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFuaW1hdGUoZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBwYXJzZUxhbmd1YWdlOiBmdW5jdGlvbiAoZWwpIHtcclxuXHJcbiAgLy8gIFNwbGl0cyBvbiBhIHNlcXVlbmNlIG9mIG9uZSBvciBtb3JlIGNvbW1hcywgcGVyaW9kcyBvciBzcGFjZXMuXHJcbiAgICAgIHZhciB3b3JkcyA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGxyZXZlYWwnKS5zcGxpdCgvWywgXSsvKSxcclxuICAgICAgICAgIGVudGVyRnJvbSxcclxuICAgICAgICAgIHBhcnNlZCA9IHt9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gZmlsdGVyICh3b3Jkcykge1xyXG4gICAgICAgIHZhciByZXQgPSBbXSxcclxuXHJcbiAgICAgICAgICAgIGJsYWNrbGlzdCA9IFtcclxuICAgICAgICAgICAgICBcImZyb21cIixcclxuICAgICAgICAgICAgICBcInRoZVwiLFxyXG4gICAgICAgICAgICAgIFwiYW5kXCIsXHJcbiAgICAgICAgICAgICAgXCJ0aGVuXCIsXHJcbiAgICAgICAgICAgICAgXCJidXRcIlxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICB3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkLCBpKSB7XHJcbiAgICAgICAgICBpZiAoYmxhY2tsaXN0LmluZGV4T2Yod29yZCkgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXQucHVzaCh3b3JkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgfVxyXG5cclxuICAgICAgd29yZHMgPSBmaWx0ZXIod29yZHMpO1xyXG5cclxuICAgICAgd29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCwgaSkge1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHdvcmQpIHtcclxuICAgICAgICAgIGNhc2UgXCJlbnRlclwiOlxyXG4gICAgICAgICAgICBlbnRlckZyb20gPSB3b3Jkc1tpICsgMV07XHJcblxyXG4gICAgICAgICAgICBpZiAoZW50ZXJGcm9tID09IFwidG9wXCIgfHwgZW50ZXJGcm9tID09IFwiYm90dG9tXCIpIHtcclxuICAgICAgICAgICAgICBwYXJzZWQuYXhpcyA9IFwieVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZW50ZXJGcm9tID09IFwibGVmdFwiIHx8IGVudGVyRnJvbSA9PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgICBwYXJzZWQuYXhpcyA9IFwieFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgY2FzZSBcImFmdGVyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kZWxheSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJ3YWl0XCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kZWxheSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJtb3ZlXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kaXN0YW5jZSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJvdmVyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kdXJhdGlvbiA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJ0cmlnZ2VyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5ldmVudE5hbWUgPSB3b3Jkc1tpICsgMV07XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vICBVbnJlY29nbml6YWJsZSB3b3JkczsgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIC8vICBBZnRlciBhbGwgdmFsdWVzIGFyZSBwYXJzZWQsIGxldOKAmXMgbWFrZSBzdXJlIG91ciBvdXJcclxuICAvLyAgcGl4ZWwgZGlzdGFuY2UgaXMgbmVnYXRpdmUgZm9yIHRvcCBhbmQgbGVmdCBlbnRyYW5jZXMuXHJcbiAgLy9cclxuICAvLyAgaWUuIFwibW92ZSAyNXB4IGZyb20gdG9wXCIgc3RhcnRzIGF0ICd0b3A6IC0yNXB4JyBpbiBDU1MuXHJcblxyXG4gICAgICBpZiAoZW50ZXJGcm9tID09IFwidG9wXCIgfHwgZW50ZXJGcm9tID09IFwibGVmdFwiKSB7XHJcblxyXG4gICAgICAgIGlmICghdHlwZW9mIHBhcnNlZC5kaXN0YW5jZSA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICBwYXJzZWQuZGlzdGFuY2UgPSBcIi1cIiArIHBhcnNlZC5kaXN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgcGFyc2VkLmRpc3RhbmNlID0gXCItXCIgKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgIH0sXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4gICAgZ2VuQ1NTOiBmdW5jdGlvbiAoZWwsIGF4aXMpIHtcclxuICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VMYW5ndWFnZShlbCk7XHJcblxyXG4gICAgICB2YXIgZGlzdCAgID0gcGFyc2VkLmRpc3RhbmNlIHx8IHRoaXMub3B0aW9ucy5kaXN0YW5jZSxcclxuICAgICAgICAgIGR1ciAgICA9IHBhcnNlZC5kdXJhdGlvbiB8fCB0aGlzLm9wdGlvbnMuZHVyYXRpb24sXHJcbiAgICAgICAgICBkZWxheSAgPSBwYXJzZWQuZGVsYXkgICAgfHwgdGhpcy5vcHRpb25zLmRlbGF5LFxyXG4gICAgICAgICAgYXhpcyAgID0gcGFyc2VkLmF4aXMgICAgIHx8IHRoaXMub3B0aW9ucy5heGlzO1xyXG5cclxuICAgICAgdmFyIHRyYW5zaXRpb24gPSBcIi13ZWJraXQtdHJhbnNpdGlvbjogYWxsIFwiICsgZHVyICsgXCIgZWFzZSBcIiArIGRlbGF5ICsgXCI7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiLW1vei10cmFuc2l0aW9uOiBhbGwgXCIgKyBkdXIgKyBcIiBlYXNlIFwiICsgZGVsYXkgKyBcIjtcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi1vLXRyYW5zaXRpb246IGFsbCBcIiArIGR1ciArIFwiIGVhc2UgXCIgKyBkZWxheSArIFwiO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNpdGlvbjogYWxsIFwiICsgZHVyICsgXCIgZWFzZSBcIiArIGRlbGF5ICsgXCI7XCI7XHJcblxyXG4gICAgICB2YXIgaW5pdGlhbCA9IFwiLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVwiICsgYXhpcyArIFwiKFwiICsgZGlzdCArIFwiKTtcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgXCItbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoXCIgKyBkaXN0ICsgXCIpO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNmb3JtOiB0cmFuc2xhdGVcIiArIGF4aXMgKyBcIihcIiArIGRpc3QgKyBcIik7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wYWNpdHk6IDA7XCI7XHJcblxyXG4gICAgICB2YXIgdGFyZ2V0ID0gXCItd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCItbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3BhY2l0eTogMTtcIjtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLFxyXG4gICAgICAgIGluaXRpYWw6IGluaXRpYWwsXHJcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICAgICAgdG90YWxEdXJhdGlvbjogKChwYXJzZUZsb2F0KGR1cikgKyBwYXJzZUZsb2F0KGRlbGF5KSkgKiAxMDAwKVxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBhbmltYXRlOiBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgdmFyIGNzcyA9IHRoaXMuZ2VuQ1NTKGVsKTtcclxuXHJcbiAgICAgIGlmICghZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNyLWluaXQnKSkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjc3MuaW5pdGlhbCk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXNyLWluaXQnLCB0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zci1jb21wbGV0ZScpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNFbGVtZW50SW5WaWV3cG9ydChlbCwgdGhpcy5vcHRpb25zLnZpZXdwb3J0RmFjdG9yKSkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjc3MudGFyZ2V0ICsgY3NzLnRyYW5zaXRpb24pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zci1jb21wbGV0ZScsIHRydWUpO1xyXG4gICAgICAgIH0sIGNzcy50b3RhbER1cmF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuICB9OyAvLyBlbmQgc2Nyb2xsUmV2ZWFsLnByb3RvdHlwZVxyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICB3aW5kb3cuc2Nyb2xsUmV2ZWFsID0gbmV3IHNjcm9sbFJldmVhbCgpO1xyXG4gIH0pO1xyXG5cclxufSkod2luZG93KTsiXX0=
